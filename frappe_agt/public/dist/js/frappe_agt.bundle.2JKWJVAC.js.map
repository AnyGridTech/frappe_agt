{
  "version": 3,
  "sources": ["../../../../../apps/frappe_agt/frappe_agt/public/js/checklist/checklists.js", "../../../../../apps/frappe_agt/frappe_agt/public/js/child_tracker_table/setup.js", "../../../../../apps/frappe_agt/frappe_agt/public/js/namespace/namespaces.js", "../../../../../apps/frappe_agt/frappe_agt/public/js/ui/enhanced_dialog.js", "../../../../../apps/frappe_agt/frappe_agt/public/js/ui/ultra_dialog.js", "../../../../../apps/frappe_agt/frappe_agt/public/js/utils/brazil/cnpj.js", "../../../../../apps/frappe_agt/frappe_agt/public/js/utils/brazil/cpf.js", "../../../../../apps/frappe_agt/frappe_agt/public/js/utils/brazil/cpf_cnpj.js", "../../../../../apps/frappe_agt/frappe_agt/public/js/utils/brazil/cep.js", "../../../../../apps/frappe_agt/frappe_agt/public/js/utils/brazil/phone.js", "../../../../../apps/frappe_agt/frappe_agt/public/js/utils/text.js", "../../../../../apps/frappe_agt/frappe_agt/public/js/utils/core.js", "../../../../../apps/frappe_agt/frappe_agt/public/js/utils/db.js", "../../../../../apps/frappe_agt/frappe_agt/public/js/utils/dialog.js", "../../../../../apps/frappe_agt/frappe_agt/public/js/utils/doc.js", "../../../../../apps/frappe_agt/frappe_agt/public/js/utils/form.js", "../../../../../apps/frappe_agt/frappe_agt/public/js/utils/table.js"],
  "sourcesContent": ["// Copyright (c) 2025, AnyGridTech and contributors\n// For license information, please see license.txt\nfrappe.provide(\"agt.checklist\");\nagt.checklist = {\n  table: {\n    all: { setup: async () => {\n    } },\n    inverter: { setup: async () => {\n    } },\n    ev_charger: { setup: async () => {\n    } },\n    battery: { setup: async () => {\n    } },\n    transformer: { setup: async () => {\n    } },\n    smart_meter: { setup: async () => {\n    } },\n    smart_energy_manager: { setup: async () => {\n    } },\n    datalogger: { setup: async () => {\n    } }\n  },\n  tracker_table: {\n    all: { setup: async () => {\n    } },\n    inverter: { setup: async () => {\n    } },\n    ev_charger: { setup: async () => {\n    } },\n    battery: { setup: async () => {\n    } },\n    transformer: { setup: async () => {\n    } },\n    smart_meter: { setup: async () => {\n    } },\n    smart_energy_manager: { setup: async () => {\n    } },\n    datalogger: { setup: async () => {\n    } }\n  },\n  setup: async () => {\n    frappe.ui.form.on(cur_frm.doctype, {\n      after_save: function(frm) {\n        agt.utils.form.field.validate_js_visible_fields(frm, \"Customer Fix Info\").msgprint();\n      },\n      before_workflow_action: async function(frm) {\n        if (frm.doc.__islocal) return;\n        const action = frm.states.frm.selected_workflow_action;\n        if (action === \"Encaminhar ao Suporte\") {\n          agt.utils.form.field.validate_js_visible_fields(frm, \"Pre Analysis\").throw_error();\n        }\n        if (action === \"Concluir Checklist\") {\n          agt.utils.form.field.validate_js_visible_fields(frm, \"Pre Analysis\").throw_error();\n          await trigger_checklist_finished_func(frm);\n        }\n        if (action === \"Rejeitar\") {\n          agt.utils.update_workflow_state({\n            doctype: \"Service Protocol\",\n            docname: frm.doc[\"sp_docname\"],\n            workflow_state: \"Holding Action\",\n            ignore_workflow_validation: true\n          });\n        }\n        if (action === \"Solicitar Proposta de Envio\") {\n          agt.utils.form.field.validate_js_visible_fields(frm, \"Pre Analysis\").throw_error();\n          await trigger_checklist_finished_func(frm);\n          await trigger_proposed_dispatch_func(frm);\n        }\n        return;\n      }\n    });\n    let trigger_proposed_dispatch = false;\n    const trigger_proposed_dispatch_func = async (frm) => {\n      if (frm.doc.__islocal) return;\n      if (trigger_proposed_dispatch) {\n        console.log(\"Requisi\\xE7\\xE3o em andamento, ignorando chamada...\");\n        return;\n      }\n      trigger_proposed_dispatch = true;\n      try {\n        const swa = frm.states.frm.selected_workflow_action;\n        const swa_request_dispatch = \"Solicitar Proposta de Envio\";\n        if (swa !== swa_request_dispatch) {\n          throw new Error(\"A a\\xE7\\xE3o selecionada n\\xE3o permite criar uma Proposta de Envio.\");\n        }\n        const dt_name = \"Proposed Dispatch\";\n        const existingDispatches = await frappe.db.get_list(dt_name, {\n          filters: { ticket_docname: frm.doc[\"ticket_docname\"] },\n          fields: [\"name\"]\n        });\n        if (existingDispatches && existingDispatches.length > 0) {\n          const existing_list_html = existingDispatches.map((ticket) => `<li>${ticket.name}</li>`).join(\"\");\n          throw new Error(`J\\xE1 existe uma Proposta de Envio vinculada a este Ticket: <br><ul>${existing_list_html}</ul>`);\n        }\n        const freshDispatches = await frappe.db.get_list(dt_name, {\n          filters: { ticket_docname: frm.doc[\"ticket_docname\"] },\n          fields: [\"name\"]\n        });\n        if (freshDispatches && freshDispatches.length > 0) return;\n        const docname = await agt.utils.doc.create_doc(dt_name, [\"ticket_docname\"], frm.fields_dict);\n        if (!docname) {\n          throw new Error(\"Falha ao criar Proposta de Envio.\");\n        }\n        console.log(\"Proposta de Envio criada com sucesso:\", docname);\n        const main_eqp_group = frm.doc[\"main_eqp_group\"];\n        if (!main_eqp_group) {\n          throw new Error(\"Grupo do equipamento principal n\\xE3o definido.\");\n        }\n        await agt.utils.table.row.add_one(frm, \"proposed_dispatch_table\", {\n          item_name: main_eqp_group,\n          item_quantity: 1\n        });\n        frm.dirty();\n        console.log(\"Linha adicionada na tabela 'proposed_dispatch_table' com sucesso.\");\n        await frm.save();\n      } catch (error) {\n        console.error(\"Erro ao criar Proposta de Envio:\", error);\n        frappe.msgprint({\n          title: \"Erro ao criar Proposta de Envio\",\n          message: error instanceof Error ? error.message : String(error),\n          indicator: \"red\"\n        });\n      } finally {\n        trigger_proposed_dispatch = false;\n      }\n    };\n    let trigger_checklist_finished = false;\n    const trigger_checklist_finished_func = async (form) => {\n      if (form.doc.__islocal) return;\n      if (trigger_checklist_finished) {\n        console.log(\"Requisi\\xE7\\xE3o em andamento, ignorando chamada...\");\n        return;\n      }\n      trigger_checklist_finished = true;\n      try {\n        agt.utils.update_workflow_state({\n          doctype: \"Service Protocol\",\n          docname: form.doc[\"sp_docname\"],\n          workflow_state: \"Finished\",\n          ignore_workflow_validation: true\n        });\n        frappe.msgprint({\n          title: \"Checklist conclu\\xEDdo!\",\n          message: \"Voc\\xEA ser\\xE1 redirecionado novamente ao 'Service Protocol' para solicitar a proposta de envio.\",\n          indicator: \"blue\"\n        });\n        form.dirty();\n        setTimeout(() => {\n          const url = `/app/service-protocol/${form.doc[\"sp_docname\"]}`;\n          window.open(url, \"_blank\");\n        }, 500);\n        await form.save();\n      } catch (error) {\n        console.error(\"Erro ao mover o workflow state do Service Protocol:\", error);\n        frappe.msgprint({\n          title: \"Erro\",\n          message: \"Algo deu errado. Por favor, entre em contato com a equipe de Tecnologia da Informa\\xE7\\xE3o.\",\n          indicator: \"red\"\n        });\n      } finally {\n        trigger_checklist_finished = false;\n      }\n    };\n  }\n};\n", "// Copyright (c) 2025, AnyGridTech and contributors\n// For license information, please see license.txt\nfrappe.provide(\"agt.child_tracker_table\");\nagt.child_tracker_table = {\n  mirror: async (frm, doctypes, field) => {\n    for (const doctype of doctypes) {\n      try {\n        await agt.utils.form.mirror_checklist_table(frm, doctype, field, \"parent_docname\", \"child_tracker_docname\", \"child_tracker_workflow_state\");\n      } catch (error) {\n        console.error(`Erro ao espelhar tabela para doctype ${doctype}:`, error);\n      }\n    }\n  },\n  setup: async () => {\n    await setupChildTrackerTable();\n  }\n};\nconst STATUS = {\n  WORKFLOW: { AWAITING_ACTION: \"Aguardando A\\xE7\\xE3o\", REVIEW: \"Revis\\xE3o\" },\n  ROW: { PENDING: \"Pendente\", FINISHED: \"Conclu\\xEDdo\" }\n};\nconst ACTION = {\n  REQUEST_REVIEW: \"Solicitar Revis\\xE3o\",\n  APPROVE_CORRECTION: \"Aprovar Corre\\xE7\\xE3o\",\n  NEW_CORRECTION: \"Novo Pedido\"\n};\nfunction getPending(rows) {\n  return rows.filter((row) => row.status === STATUS.ROW.PENDING);\n}\nfunction getCorrectionsHtml(rows) {\n  return getPending(rows).map((row) => {\n    const label = row.correction_label;\n    const text = row.correction_text;\n    return `<li>\\u26A0\\uFE0F ${label || \"\"}${label && text ? \": \" : \"\"}${text || \"\"}</li>`;\n  }).join(\"\");\n}\nfunction getDialogFields(rows) {\n  return getPending(rows).map((row, idx) => ({\n    fieldname: `chk_${idx}`,\n    fieldtype: \"Check\",\n    label: `${row.correction_label || `Pedido ${idx + 1}`}${row.correction_text ? ` \\u2014 ${row.correction_text}` : \"\"}`,\n    default: 0\n  }));\n}\nasync function approveCorrections(form, rows, onDone) {\n  const pending = getPending(rows);\n  if (!pending.length) {\n    frappe.msgprint(\"N\\xE3o existem pend\\xEAncias para aprovar.\");\n    return;\n  }\n  const d = new frappe.ui.Dialog({\n    title: \"Marcar corre\\xE7\\xF5es como conclu\\xEDdas\",\n    fields: getDialogFields(rows),\n    primary_action_label: \"Confirmar e Aprovar Corre\\xE7\\xE3o\",\n    secondary_action_label: \"Cancelar\"\n  });\n  d.set_primary_action(\"Confirmar e Aprovar Corre\\xE7\\xE3o\", async () => {\n    const values = d.get_values();\n    if (!Object.values(values).every((v) => v === 1 || v === true)) {\n      frappe.msgprint({ title: \"Aten\\xE7\\xE3o\", message: `Para aprovar a corre\\xE7\\xE3o, marque todas as pend\\xEAncias como corrigidas.`, indicator: \"orange\" });\n      return;\n    }\n    await Promise.all(pending.map((row) => agt.utils.table.row.update_one(row, {\n      status: STATUS.ROW.FINISHED,\n      finished_by: frappe.boot.user.email,\n      finished_date: frappe.datetime.now_datetime()\n    })));\n    form.dirty();\n    form.refresh_field(\"corrections_tracker\");\n    await form.save();\n    d.hide();\n    await agt.utils.update_workflow_state({\n      doctype: form.doctype,\n      docname: form.docname,\n      workflow_state: STATUS.WORKFLOW.AWAITING_ACTION,\n      callback: async () => {\n        frappe.msgprint({ title: \"Corre\\xE7\\xF5es aprovadas\", message: `Todas as pend\\xEAncias foram marcadas como conclu\\xEDdas.`, indicator: \"green\" });\n        form.dirty();\n        form.refresh_field(\"corrections_tracker\");\n        await form.save();\n        onDone && onDone();\n      }\n    });\n  });\n  d.show();\n}\nfunction loadAdminButtons() {\n  if (!frappe.boot.user.roles.includes(\"System Manager\")) return;\n  Object.values(STATUS.WORKFLOW).forEach((status) => {\n    cur_frm.add_custom_button(`Ir para ${status}`, async () => {\n      await agt.utils.update_workflow_state({\n        doctype: cur_frm.doctype,\n        docname: cur_frm.docname,\n        workflow_state: status,\n        ignore_workflow_validation: true\n      });\n    });\n  });\n}\nasync function setupChildTrackerTable() {\n  if (cur_frm.doc.__islocal || !cur_frm.fields_dict?.[\"corrections_tracker\"]) return;\n  const meta = await agt.utils.doc.get_doc_meta(\"Corrections Tracker\");\n  if (!meta) return;\n  const correctionLabelFields = {};\n  meta.fields.forEach((field) => {\n    if (field.fieldname === \"correction_label\") correctionLabelFields[field.fieldname] = field;\n  });\n  const labels = Object.values(cur_frm.fields_dict).filter((f) => f.df.permlevel === 0 && !f.df.read_only && !f.df.hidden && ![\"Section Break\", \"Column Break\", \"Button\", \"Table\"].includes(f.df.fieldtype)).map((f) => (f.df.label || f.__label)?.trim()).filter(Boolean);\n  frappe.ui.form.on(cur_frm.doctype, \"corrections_tracker_on_form_rendered\", async function() {\n    if (!cur_frm.cur_grid?.doc.__islocal) return;\n    Object.keys(correctionLabelFields).forEach((fieldName) => cur_frm.cur_grid?.set_field_property(fieldName, \"options\", labels));\n  });\n  frappe.ui.form.on(cur_frm.doctype, {\n    async before_workflow_action(form) {\n      const ws = form.doc.workflow_state;\n      const action = form.states?.frm?.selected_workflow_action;\n      const rows = form.doc[\"corrections_tracker\"] || [];\n      if (ws === STATUS.WORKFLOW.AWAITING_ACTION && action === ACTION.REQUEST_REVIEW) {\n        if (!getPending(rows).length) frappe.throw(`Adicione ao menos um pedido de corre\\xE7\\xE3o (status \"Pendente\") antes de solicitar revis\\xE3o.`);\n        await agt.utils.update_workflow_state({\n          doctype: form.doctype,\n          docname: form.docname,\n          workflow_state: STATUS.WORKFLOW.REVIEW,\n          ignore_workflow_validation: true,\n          callback: async () => {\n            frappe.msgprint({ title: \"Enviado para Revis\\xE3o\", message: `O documento foi enviado para \"<b>${STATUS.WORKFLOW.REVIEW}</b>\".`, indicator: \"blue\" });\n            form.dirty();\n            form.refresh_field(\"corrections_tracker\");\n            await form.save();\n          }\n        });\n        return false;\n      }\n      return true;\n    },\n    async before_save(form) {\n      const rows = form.doc[\"corrections_tracker\"] || [];\n      const activeLabels = getPending(rows).map((row) => row.correction_label).filter(Boolean);\n      if (new Set(activeLabels).size < activeLabels.length) {\n        frappe.throw(`<b>Falha ao salvar:</b><br>Existem 'R\\xF3tulos da Corre\\xE7\\xE3o' duplicados entre os pedidos ativos. Cada pedido deve referir um campo \\xFAnico.`);\n      }\n      getPending(rows).forEach((row) => {\n        if (!row.correction_label || !row.correction_text) {\n          frappe.throw(`<b>Falha ao salvar:</b><br>Para cada pedido com status \"Pendente\" \\xE9 necess\\xE1rio preencher 'R\\xF3tulo da Corre\\xE7\\xE3o' e 'Texto da Corre\\xE7\\xE3o'.`);\n        }\n      });\n    },\n    async after_save(form) {\n      const ws = form.doc.workflow_state;\n      const rows = form.doc[\"corrections_tracker\"] || [];\n      const pending = getPending(rows);\n      if (!pending.length) return;\n      const html = getCorrectionsHtml(rows);\n      if (!html.length) return;\n      if (ws === STATUS.WORKFLOW.AWAITING_ACTION) {\n        const confirmDiag = frappe.confirm(`Existem pedidos pendentes. Deseja enviar para \"<b>${STATUS.WORKFLOW.REVIEW}</b>\" agora?<br><br><ul>${html}</ul>`, async () => {\n          await agt.utils.update_workflow_state({\n            doctype: form.doctype,\n            docname: form.docname,\n            workflow_state: STATUS.WORKFLOW.REVIEW,\n            ignore_workflow_validation: true,\n            callback: async () => {\n              frappe.msgprint({ title: \"Enviado para Revis\\xE3o\", message: `O documento foi enviado para \"<b>${STATUS.WORKFLOW.REVIEW}</b>\".`, indicator: \"blue\" });\n              form.dirty();\n              form.refresh_field(\"corrections_tracker\");\n            }\n          });\n        });\n        confirmDiag.set_primary_action(\"Sim, enviar para revis\\xE3o.\");\n        confirmDiag.set_secondary_action_label(\"N\\xE3o, depois.\");\n      }\n      if (ws === STATUS.WORKFLOW.REVIEW) {\n        frappe.msgprint({ title: \"Corre\\xE7\\xF5es pendentes\", message: `Confirme se os seguintes itens foram corrigidos pelo cliente:<br><br><ul>${html}</ul>`, indicator: \"orange\" });\n      }\n    },\n    async refresh() {\n      loadAdminButtons();\n    },\n    async onload(form) {\n      loadAdminButtons();\n      form.set_df_property(\"corrections_tracker\", \"cannot_delete_rows\", 1);\n      const rows = form.doc[\"corrections_tracker\"] || [];\n      if (getPending(rows).length) form.set_df_property(\"corrections_tracker\", \"cannot_add_rows\", 1);\n      if (form.doc.workflow_state === STATUS.WORKFLOW.REVIEW) {\n        form.add_custom_button(\"Aprovar Corre\\xE7\\xE3o\", async () => approveCorrections(form, rows));\n        form.add_custom_button(ACTION.NEW_CORRECTION, async () => {\n          const confirmDiag = frappe.confirm(\"Tem certeza que deseja criar um novo pedido de corre\\xE7\\xE3o?\", async () => {\n            const finishedRows = (form.doc[\"corrections_tracker\"] || []).filter((row) => row.status === STATUS.ROW.FINISHED);\n            await Promise.all(finishedRows.map((row) => agt.utils.table.row.update_one(row, {\n              status: STATUS.ROW.FINISHED,\n              finished_by: frappe.boot.user.email,\n              finished_date: frappe.datetime.now_datetime()\n            })));\n            setTimeout(() => {\n              form.set_df_property(\"corrections_tracker\", \"cannot_add_rows\", 0);\n              frappe.msgprint(\"Crie um novo pedido de corre\\xE7\\xE3o para o cliente com os campos faltantes.\");\n            }, 2e3);\n          });\n          confirmDiag.set_primary_action(\"Sim, criar novo pedido.\");\n          confirmDiag.set_secondary_action_label(\"N\\xE3o, cancelar.\");\n        });\n      }\n      const html = getCorrectionsHtml(rows);\n      if (!getPending(rows).length || !html.length) return;\n      let msg = `<ul>${html}</ul><br>`;\n      msg += form.doc.workflow_state === STATUS.WORKFLOW.REVIEW ? `<p>Marque cada pend\\xEAncia como corrigida no bot\\xE3o 'Aprovar Corre\\xE7\\xE3o'. S\\xF3 ser\\xE1 poss\\xEDvel aprovar se todas estiverem marcadas.</p>` : `<p>H\\xE1 pedidos pendentes. Voc\\xEA pode enviar para revis\\xE3o clicando em '${ACTION.REQUEST_REVIEW}'.</p>`;\n      frappe.msgprint({ title: \"Pedidos de Corre\\xE7\\xE3o Pendentes\", message: msg, indicator: \"orange\" });\n    }\n  });\n}\n", "// Copyright (c) 2025, AnyGridTech and contributors\n// For license information, please see license.txt\nfrappe.provide(\"growatt.namespace\");\nif (typeof window.growatt === \"undefined\") {\n  window.growatt = {};\n}\nwindow.growatt.namespace.service_protocol = {\n  workflow_action: {\n    request_revision: {\n      name: \"Solicitar Revis\\xE3o\",\n      id: 1\n    },\n    request_checklist: {\n      name: \"Solicitar Checklist\",\n      id: 2\n    },\n    request_correction: {\n      name: \"Solicitar Proposta de Envio\",\n      id: 3\n    },\n    reject: {\n      name: \"Rejeitar\",\n      id: 4\n    },\n    cancel: {\n      name: \"Cancelar\",\n      id: 5\n    },\n    finish_correction: {\n      name: \"Aprovar Corre\\xE7\\xE3o\",\n      id: 6\n    }\n  },\n  workflow_state: {\n    holding_action: {\n      name: \"Aguardando A\\xE7\\xE3o\",\n      id: 1\n    },\n    growatt_review: {\n      name: \"Revis\\xE3o\",\n      id: 2\n    },\n    finished: {\n      name: \"Conclu\\xEDdo\",\n      id: 3\n    },\n    rejected: {\n      name: \"Rejeitado\",\n      id: 4\n    },\n    cancelled: {\n      name: \"Cancelado\",\n      id: 5\n    }\n  }\n};\nwindow.growatt.namespace.compliance_statement = {\n  workflow_action: {\n    approve: {\n      name: \"Aprovar\",\n      id: 1\n    },\n    request_analysis: {\n      name: \"Solicitar An\\xE1lise\",\n      id: 2\n    },\n    request_correction: {\n      name: \"Solicitar Corre\\xE7\\xE3o\",\n      id: 3\n    },\n    finish_review: {\n      name: \"Finalizar Revis\\xE3o\",\n      id: 4\n    },\n    reject: {\n      name: \"Rejeitar\",\n      id: 5\n    },\n    finish_service: {\n      name: \"Finalizar Atendimento\",\n      id: 6\n    },\n    cancel: {\n      name: \"Cancelar\",\n      id: 7\n    },\n    finish_correction: {\n      name: \"Finalizar Corre\\xE7\\xE3o\",\n      id: 8\n    },\n    request_documentation: {\n      name: \"Solicitar Documenta\\xE7\\xE3o\",\n      id: 9\n    },\n    request_checklist: {\n      name: \"Solicitar Checklist\",\n      id: 10\n    },\n    forward_to_support: {\n      name: \"Encaminhar ao Suporte\",\n      id: 11\n    }\n  },\n  workflow_state: {\n    customer_finish_filling: {\n      name: \"Cliente: Finalizar Preenchimento\",\n      id: 1\n    },\n    growatt_preliminary_assessment: {\n      name: \"An\\xE1lise Preliminar\",\n      id: 2\n    },\n    customer_fix_info: {\n      name: \"Cliente: Corrigir Informa\\xE7\\xF5es\",\n      id: 3\n    },\n    growatt_review: {\n      name: \"Revis\\xE3o\",\n      id: 4\n    },\n    customer_checklist_requested: {\n      name: \"Cliente: Checklist Solicitado\",\n      id: 5\n    },\n    checklist_finished: {\n      name: \"Checklist Conclu\\xEDdo\",\n      id: 6\n    },\n    shipping_proposal: {\n      name: \"Proposta de Envio\",\n      id: 7\n    },\n    warranty_approved: {\n      name: \"Garantia Aprovada\",\n      id: 9\n    },\n    rejected: {\n      name: \"Rejeitado\",\n      id: 10\n    },\n    finished: {\n      name: \"Conclu\\xEDdo\",\n      id: 11\n    },\n    cancelled: {\n      name: \"Cancelado\",\n      id: 12\n    },\n    approved: {\n      name: \"Aprovado\",\n      id: 13\n    },\n    finished_fixed: {\n      name: \"Finalizado: Corrigido\",\n      id: 14\n    },\n    finished_missing: {\n      name: \"Finalizado: Corre\\xE7\\xE3o Faltante\",\n      id: 15\n    },\n    customer_necessary_action: {\n      name: \"Cliente: A\\xE7\\xE3o Necess\\xE1ria\",\n      id: 16\n    }\n  }\n};\nwindow.growatt.namespace.checklist = {\n  workflow_state: {\n    pre_analysis: {\n      name: \"An\\xE1lise Preliminar\",\n      id: 1\n    },\n    customer_fix_info: {\n      name: \"Cliente: Corrigir Informa\\xE7\\xF5es\",\n      id: 2\n    },\n    growatt_review: {\n      name: \"Revis\\xE3o\",\n      id: 3\n    },\n    finished: {\n      name: \"Conclu\\xEDdo\",\n      id: 4\n    },\n    rejected: {\n      name: \"Rejeitado\",\n      id: 5\n    },\n    cancelled: {\n      name: \"Cancelado\",\n      id: 6\n    }\n  }\n};\nwindow.growatt.namespace.ticket = {\n  workflow_action: {\n    approve: {\n      name: \"Aprovar\",\n      id: 1\n    },\n    finish: {\n      name: \"Concluir\",\n      id: 2\n    },\n    reject: {\n      name: \"Rejeitar\",\n      id: 3\n    },\n    cancel: {\n      name: \"Cancelar\",\n      id: 4\n    },\n    reactive: {\n      name: \"Reativar\",\n      id: 5\n    }\n  },\n  workflow_state: {\n    draft: {\n      name: \"Rascunho\",\n      id: 1\n    },\n    active: {\n      name: \"Ativo\",\n      id: 2\n    },\n    finished: {\n      name: \"Concluido\",\n      id: 3\n    },\n    rejected: {\n      name: \"Rejeitado\",\n      id: 4\n    },\n    cancelled: {\n      name: \"Cancelado\",\n      id: 5\n    }\n  }\n};\n", "// Copyright (c) 2025, AnyGridTech and contributors\n// For license information, please see license.txt\nfrappe.provide(\"agt.ui.enhanced_dialog\");\nfrappe.ui.Dialog = class EnhancedDialog extends frappe.ui.Dialog {\n  constructor(opts) {\n    super(opts);\n    this[\"$wrapper\"].on(\"show.bs.modal\", () => {\n      const wrapperEl = this[\"$wrapper\"][0];\n      wrapperEl.style.left = \"\";\n      wrapperEl.style.top = \"\";\n      wrapperEl.style.margin = \"\";\n    });\n    const isMobile = /Mobi|Android/i.test(navigator.userAgent);\n    if (isMobile) {\n      this[\"$wrapper\"].addClass(\"modal-fullscreen\");\n      this[\"$wrapper\"].css({\n        width: \"100%\",\n        height: \"100%\",\n        top: 0,\n        left: 0,\n        margin: 0,\n        borderRadius: 0\n      });\n      this[\"$wrapper\"].find(\".modal-content\").css({\n        height: \"100%\",\n        borderRadius: 0\n      });\n    }\n    this[\"$wrapper\"].on(\"keydown\", (e) => {\n      if (e.key === \"Escape\") {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n      }\n    });\n    this[\"$wrapper\"].on(\"click\", (e) => {\n      if ($(e.target).hasClass(\"modal\")) {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n      }\n    });\n    this.makeDraggable();\n  }\n  makeDraggable() {\n    const wrapperEl = this[\"$wrapper\"][0];\n    const headerEl = this[\"$wrapper\"].find(\".modal-header\")[0];\n    let dragging = false;\n    let offsetX = 0;\n    let offsetY = 0;\n    const startDrag = (clientX, clientY) => {\n      dragging = true;\n      offsetX = clientX - wrapperEl.offsetLeft;\n      offsetY = clientY - wrapperEl.offsetTop;\n    };\n    const doDrag = (clientX, clientY) => {\n      if (dragging) {\n        wrapperEl.style.left = `${clientX - offsetX}px`;\n        wrapperEl.style.top = `${clientY - offsetY}px`;\n      }\n    };\n    headerEl.addEventListener(\"mousedown\", (e) => {\n      if (e.target.closest('.modal-header .close, .modal-header .btn-close, [data-dismiss=\"modal\"]')) {\n        return;\n      }\n      startDrag(e.clientX, e.clientY);\n    });\n    document.addEventListener(\"mousemove\", (e) => doDrag(e.clientX, e.clientY));\n    document.addEventListener(\"mouseup\", () => {\n      dragging = false;\n    });\n    headerEl.addEventListener(\"touchstart\", (e) => {\n      const target = e.target;\n      if (target.closest('.modal-header .close, .modal-header .btn-close, [data-dismiss=\"modal\"]')) {\n        return;\n      }\n      const touch = e.touches[0];\n      if (touch) {\n        startDrag(touch.clientX, touch.clientY);\n        doDrag(touch.clientX, touch.clientY);\n      }\n      e.preventDefault();\n    }, { passive: false });\n    document.addEventListener(\"touchend\", () => {\n      dragging = false;\n    });\n  }\n};\n", "// Copyright (c) 2025, AnyGridTech and contributors\n// For license information, please see license.txt\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nfrappe.provide(\"agt.ui.ultra_dialog\");\nclass UltraDialogImpl {\n  /**\n  * Creates a new UltraDialog with given properties.\n  * @param props.title - Initial title text.\n  * @param props.message - Initial body message.\n  */\n  constructor(props) {\n    // --- Private DOM references ---\n    __publicField(this, \"modal\", null);\n    __publicField(this, \"header\", null);\n    __publicField(this, \"body\", null);\n    __publicField(this, \"footer\", null);\n    __publicField(this, \"backdrop\", null);\n    __publicField(this, \"hide_btn\", null);\n    __publicField(this, \"copy_btn\", null);\n    __publicField(this, \"close_btn\", null);\n    // --- Internal state and identifiers ---\n    __publicField(this, \"themeKeyCacheLocal\", \"\");\n    __publicField(this, \"body_prefix_id\", \"ultra-modal-body\");\n    __publicField(this, \"header_prefix_id\", \"ultra-modal-header\");\n    __publicField(this, \"footer_prefix_id\", \"ultra-modal-footer\");\n    __publicField(this, \"close_prefix_id\", \"ultra-modal-close\");\n    __publicField(this, \"copy_prefix_id\", \"ultra-modal-copy\");\n    __publicField(this, \"hide_prefix_id\", \"ultra-modal-hide\");\n    __publicField(this, \"body_id\", \"\");\n    __publicField(this, \"header_id\", \"\");\n    __publicField(this, \"footer_id\", \"\");\n    __publicField(this, \"hide_id\", \"\");\n    __publicField(this, \"copy_id\", \"\");\n    __publicField(this, \"close_id\", \"\");\n    // UI Element Content (Buttons/Icons)\n    __publicField(this, \"close_btn_default\", __(\"Fechar\"));\n    __publicField(this, \"close_btn_waiting\", `<span class=\"spinner-border spinner-border-sm me-1\" role=\"status\" aria-hidden=\"true\"></span> ${__(\"Aguarde...\")}`);\n    __publicField(this, \"hide_btn_default\", __(\"Ocultar\"));\n    __publicField(this, \"hide_btn_show\", __(\"Mostrar\"));\n    // private closeIconDefault = frappe.utils.icon('close', 'sm');\n    // private closeIconWaiting = `<span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>`;\n    // --- Public properties ---\n    __publicField(this, \"id\");\n    __publicField(this, \"title\");\n    __publicField(this, \"message\");\n    __publicField(this, \"size\", 360);\n    __publicField(this, \"zOrder\", 1050);\n    __publicField(this, \"can_copy\", true);\n    __publicField(this, \"can_hide\", true);\n    __publicField(this, \"can_close\", true);\n    __publicField(this, \"can_drag\", true);\n    __publicField(this, \"can_drag_mobile\", true);\n    __publicField(this, \"auto_scroll\", true);\n    __publicField(this, \"backdrop_blur\", true);\n    __publicField(this, \"state\", \"default\");\n    this.title = props.title;\n    this.message = props.message;\n    this.generate_random_id();\n    this.default_initialization();\n    this.parameters_initialization(props);\n  }\n  /**\n   * This function initializes the properties of the Dialog.\n   * It will set the default values for the dialog.\n   * It sets the initial visibility, drag, copy, hide and close properties.\n   * @param props - Properties to initialize the dialog with.\n   */\n  parameters_initialization(props) {\n    this.visible(props.visible);\n    this.show_hide_btn(props.can_hide ?? true);\n    this.show_copy_btn(props.can_copy ?? true);\n    this.show_close_btn(props.can_close ?? true);\n    this.set_drag(props.can_drag ?? true);\n    this.set_drag_mobile(props.can_drag_mobile ?? true);\n    this.set_state(props.initial_state || \"default\");\n  }\n  // --- Initializes the default settings ---\n  default_initialization() {\n    this.create_modal();\n    this.create_header();\n    this.create_body();\n    this.create_footer();\n    this.load_theme_changer();\n    this.load_dialog_dragger();\n    if (this.message) {\n      this.set_message(this.message, { auto_scroll: this.auto_scroll });\n    }\n  }\n  /**\n  * Generates unique element IDs for body, header, footer, log and close button.\n  * @returns A unique ID for the modal dialog.\n  */\n  generate_random_id() {\n    this.id = `${Date.now()}-${Math.floor(Math.random() * 1e3)}`;\n    this.body_id = `${this.body_prefix_id}-${this.id}`;\n    this.header_id = `${this.header_prefix_id}-${this.id}`;\n    this.footer_id = `${this.footer_prefix_id}-${this.id}`;\n    this.close_id = `${this.close_prefix_id}-${this.id}`;\n    this.copy_id = `${this.copy_prefix_id}-${this.id}`;\n    this.hide_id = `${this.hide_prefix_id}-${this.id}`;\n  }\n  /**\n   * Creates and appends the modal container to the document, applying base styles.\n   */\n  create_modal() {\n    if (this.modal) {\n      return this.modal;\n    }\n    this.modal = document.createElement(\"div\");\n    this.modal.id = this.id;\n    this.modal.setAttribute(\"name\", \"modal\");\n    this.modal.style.position = \"fixed\";\n    this.modal.style.top = \"120px\";\n    this.modal.style.left = \"50%\";\n    this.modal.style.transform = \"translateX(-50%)\";\n    this.modal.style.width = `${this.size}px`;\n    this.modal.style.maxWidth = \"90%\";\n    this.modal.style.zIndex = `${this.zOrder}`;\n    this.modal.setAttribute(\"role\", \"dialog\");\n    this.modal.setAttribute(\"aria-modal\", \"true\");\n    this.modal.setAttribute(\"aria-labelledby\", this.header_id);\n    this.modal.setAttribute(\"aria-describedby\", this.body_id);\n    const rootStyles = getComputedStyle(document.documentElement);\n    const backgroundColor = rootStyles.getPropertyValue(\"--bg-color\").trim() || \"#fff\";\n    const textColor = rootStyles.getPropertyValue(\"--text-color\").trim() || \"#212529\";\n    const borderColor = rootStyles.getPropertyValue(\"--border-color\").trim() || \"#ced4da\";\n    this.modal.style.backgroundColor = backgroundColor;\n    this.modal.style.color = textColor;\n    this.modal.style.border = `1px solid ${borderColor}`;\n    this.modal.style.borderRadius = \"6px\";\n    this.modal.style.boxShadow = \"0 4px 15px rgba(0, 0, 0, 0.2)\";\n    this.modal.style.fontFamily = \"inherit\";\n    this.modal.style.userSelect = \"none\";\n    document.body.appendChild(this.modal);\n    return this.modal;\n  }\n  /**\n   * Creates the header element, applies title and drag cursor if enabled.\n   */\n  create_header() {\n    if (this.header) {\n      console.warn(`Header already exists. You can not create another header for modal id: ${this.id}`);\n      return this.header;\n    }\n    this.header = document.createElement(\"div\");\n    this.header.id = this.header_id;\n    this.header.setAttribute(\"name\", \"header\");\n    this.header.style.padding = \"10px\";\n    this.header.style.backgroundColor = \"#f5f5f5\";\n    this.header.style.color = \"#212529\";\n    this.header.style.borderBottom = `1px solid #ced4da`;\n    this.header.style.fontWeight = \"bold\";\n    this.header.textContent = this.title;\n    this.header.style.cursor = this.can_drag || this.can_drag_mobile ? \"move\" : \"default\";\n    this.header.style.borderRadius = \"6px 6px 0 0\";\n    if (this.modal) {\n      this.modal.appendChild(this.header);\n    } else {\n      console.error(`Could not initialize the header. Modal is not yet defined, please instantiate the modal before trying to create the header. Modal ID: ${this.id}`);\n    }\n    return this.header;\n  }\n  /**\n   * Creates the body element and inserts the initial message log container.\n   */\n  create_body() {\n    if (this.body) {\n      return this.body;\n    }\n    this.body = document.createElement(\"div\");\n    this.body.id = this.body_id;\n    this.body.setAttribute(\"name\", \"body\");\n    this.body.style.padding = \"10px\";\n    this.body.style.maxHeight = \"300px\";\n    this.body.style.overflowY = \"auto\";\n    if (this.modal) {\n      this.modal.appendChild(this.body);\n    } else {\n      console.error(`Could not initialize the body. Modal is not yet defined, please instantiate the modal before trying to create the body. Modal ID: ${this.id}`);\n    }\n    return this.body;\n  }\n  /**\n   * Creates the footer element, adding hide, copy and close buttons as configured.\n   */\n  create_footer() {\n    if (this.footer) {\n      return this.footer;\n    }\n    this.footer = document.createElement(\"div\");\n    this.footer.id = this.footer_id;\n    this.footer.setAttribute(\"name\", \"footer\");\n    this.footer.style.padding = \"10px\";\n    this.footer.style.display = \"flex\";\n    this.footer.style.justifyContent = \"flex-end\";\n    this.footer.style.gap = \"10px\";\n    this.footer.style.borderTop = `1px solid #ced4da`;\n    this.footer.style.borderRadius = \"0 0 6px 6px\";\n    if (this.modal) {\n      this.modal.appendChild(this.footer);\n    } else {\n      console.error(`Could not initialize the footer. Modal is not yet defined, please instantiate the modal before trying to create the footer. Modal ID: ${this.id}`);\n    }\n    return this.footer;\n  }\n  /**\n   * Creates a semi-transparent backdrop element for the modal dialog.\n   * The backdrop covers the full viewport and sits just below the modal in z-order.\n   */\n  create_backdrop() {\n    if (this.backdrop) {\n      return this.backdrop;\n    }\n    this.backdrop = document.createElement(\"div\");\n    this.backdrop.style.position = \"fixed\";\n    this.backdrop.style.top = \"0\";\n    this.backdrop.style.left = \"0\";\n    this.backdrop.style.width = \"100vw\";\n    this.backdrop.style.height = \"100vh\";\n    this.backdrop.style.backgroundColor = \"rgba(0, 0, 0, 0.5)\";\n    this.backdrop.style.zIndex = `${this.zOrder - 1}`;\n    if (this.backdrop_blur) {\n      this.backdrop.style.backdropFilter = \"blur(2px)\";\n    }\n    document.body.appendChild(this.backdrop);\n    return this.backdrop;\n  }\n  /**\n  * Destroys the backdrop element if it exists.\n  *\n  * This method checks if the `backdrop` element has been created. \n  * If so, it removes it from the DOM and sets the reference to null, \n  * ensuring proper cleanup and avoiding memory leaks.\n  */\n  destroy_backdrop() {\n    if (this.backdrop) {\n      this.backdrop.remove();\n      this.backdrop = null;\n    }\n  }\n  set_message(message, options) {\n    const bodyElement = document.getElementById(this.body_id);\n    if (!bodyElement) {\n      console.error(\n        `UltraDialog body element not found for ID: ${this.body_id}`\n      );\n      return this;\n    }\n    const messageElement = document.createElement(\"div\");\n    messageElement.style.marginBottom = \"8px\";\n    messageElement.innerHTML = message;\n    bodyElement.appendChild(messageElement);\n    const shouldScroll = options?.auto_scroll !== void 0 ? options.auto_scroll : this.auto_scroll;\n    if (shouldScroll) {\n      setTimeout(() => {\n        bodyElement.scrollTop = bodyElement.scrollHeight;\n      }, 500);\n    }\n    return this;\n  }\n  set_title(title) {\n    if (!this.header) return this;\n    this.title = title;\n    this.header.textContent = title;\n    return this;\n  }\n  /**\n   * Creates a button to toggle the visibility of the modal body.\n   * The button text changes based on the current visibility state of the body.\n   * @returns The created hide button element.\n   */\n  create_hide_btn() {\n    if (!this.footer) return;\n    this.hide_btn = document.createElement(\"button\");\n    this.hide_btn.id = this.hide_id;\n    this.hide_btn.setAttribute(\"name\", \"hide_btn\");\n    this.hide_btn.className = \"btn btn-sm btn-secondary\";\n    const isHidden = this.body && this.body.style.display === \"none\";\n    this.hide_btn.textContent = isHidden ? this.hide_btn_default : this.hide_btn_show;\n    this.hide_btn.onclick = () => {\n      if (this.hide_btn === null) return;\n      if (!this.body) return;\n      if (this.body.style.display === \"none\") {\n        this.body.style.display = \"\";\n        this.hide_btn.textContent = this.hide_btn_default;\n      } else {\n        this.body.style.display = \"none\";\n        this.hide_btn.textContent = this.hide_btn_show;\n      }\n    };\n    this.footer.insertBefore(this.hide_btn, this.footer.firstChild);\n    return this.hide_btn;\n  }\n  show_hide_btn(show) {\n    if (!this.footer) return this;\n    if (!show && this.hide_btn) this.removeElementById(this.hide_id);\n    if (show && !this.hide_btn) this.create_hide_btn();\n    return this;\n  }\n  /**\n   * Creates a button to copy the content of the modal body to the clipboard.\n   * @returns The created copy button element.\n   */\n  create_copy_btn() {\n    if (!this.footer) return;\n    this.copy_btn = document.createElement(\"button\");\n    this.copy_btn.id = this.copy_id;\n    this.copy_btn.setAttribute(\"name\", \"copy_btn\");\n    this.copy_btn.className = \"btn btn-sm btn-secondary\";\n    this.copy_btn.textContent = __(\"Copiar\");\n    this.copy_btn.onclick = () => {\n      const logContainer = this.body;\n      if (!logContainer || !logContainer.textContent?.trim()) {\n        frappe.show_alert({ message: __(\"Nenhuma mensagem para copiar.\"), indicator: \"orange\" }, 5);\n        return;\n      }\n      navigator.clipboard.writeText(logContainer.innerText || logContainer.textContent || \"\").then(() => frappe.show_alert({ message: __(\"Mensagens copiadas.\"), indicator: \"green\" }, 5)).catch((err) => {\n        console.error(\"Erro ao copiar:\", err);\n        frappe.show_alert({ message: __(\"Falha ao copiar mensagens.\"), indicator: \"red\" }, 5);\n      });\n    };\n    if (this.hide_btn && this.hide_btn.nextSibling) this.footer.insertBefore(this.copy_btn, this.hide_btn.nextSibling);\n    else if (this.hide_btn) this.footer.appendChild(this.copy_btn);\n    else this.footer.insertBefore(this.copy_btn, this.footer.firstChild);\n    return this.copy_btn;\n  }\n  show_copy_btn(show) {\n    if (!this.footer) return this;\n    this.can_copy = show;\n    if (!show && this.copy_btn) this.removeElementById(this.copy_id);\n    if (show && !this.copy_btn) this.create_copy_btn();\n    return this;\n  }\n  /**\n   * Creates a button to close the modal dialog.\n   * The button is only enabled when the dialog is not in the 'waiting' state.\n   * @returns The created close button element.\n   */\n  create_close_btn() {\n    if (!this.footer) return;\n    this.close_btn = document.createElement(\"button\");\n    this.close_btn.id = this.close_id;\n    this.close_btn.setAttribute(\"name\", \"close_btn\");\n    this.close_btn.className = \"btn btn-sm btn-primary\";\n    this.close_btn.textContent = this.close_btn_default;\n    this.close_btn.onclick = () => {\n      if (this.state !== \"waiting\") {\n        this.close();\n      }\n    };\n    this.footer.appendChild(this.close_btn);\n    this.update_close_btn_state();\n    return this.close_btn;\n  }\n  show_close_btn(show) {\n    if (!this.footer) return this;\n    this.can_close = show;\n    if (show && !this.close_btn) this.create_close_btn();\n    if (show && this.close_btn) this.update_close_btn_state();\n    if (!show && this.close_btn) this.removeElementById(this.close_id);\n    return this;\n  }\n  /** Helper to update close button based on state */\n  update_close_btn_state() {\n    if (!this.close_btn) return;\n    if (this.state === \"waiting\") {\n      this.close_btn.disabled = true;\n      this.close_btn.innerHTML = this.close_btn_waiting;\n    } else {\n      this.close_btn.disabled = false;\n      this.close_btn.textContent = this.close_btn_default;\n    }\n  }\n  /**\n   * Enables draggable behavior for the modal dialog.\n   * Allows the user to click and drag the dialog around the screen by holding the mouse on it.\n   * Allows the user to click/tap and drag the dialog around the screen by holding the finger on it.\n   * @returns The current instance of the dialog. \n   */\n  load_dialog_dragger() {\n    if (!this.modal || !this.header) {\n      console.warn(`Could not load dialog dragger. Modal or Header not defined.`);\n      return this;\n    }\n    const canDragDesktop = !!this.can_drag;\n    const canDragMobile = !!this.can_drag_mobile;\n    const isTouchDevice = \"ontouchstart\" in window;\n    this.header.style.cursor = canDragDesktop || canDragMobile ? \"move\" : \"default\";\n    let dragging = false, offsetX = 0, offsetY = 0;\n    const startDrag = (clientX, clientY, allow) => {\n      if (!allow) return;\n      dragging = true;\n      offsetX = clientX - this.modal.offsetLeft;\n      offsetY = clientY - this.modal.offsetTop;\n    };\n    const doDrag = (clientX, clientY) => {\n      if (!dragging) return;\n      this.modal.style.left = `${clientX - offsetX}px`;\n      this.modal.style.top = `${clientY - offsetY}px`;\n    };\n    const endDrag = () => {\n      dragging = false;\n    };\n    const handleMouseMove = (e) => doDrag(e.clientX, e.clientY);\n    const handleMouseUp = () => {\n      endDrag();\n      document.removeEventListener(\"mousemove\", handleMouseMove);\n      document.removeEventListener(\"mouseup\", handleMouseUp);\n    };\n    const handleTouchMove = (e) => {\n      if (e.touches.length > 0) {\n        const touch = e.touches[0];\n        if (touch) {\n          doDrag(touch.clientX, touch.clientY);\n        }\n      }\n      e.preventDefault();\n    };\n    const handleTouchEnd = () => {\n      endDrag();\n      document.removeEventListener(\"touchmove\", handleTouchMove);\n      document.removeEventListener(\"touchend\", handleTouchEnd);\n    };\n    this.header.addEventListener(\"mousedown\", (e) => {\n      if (e.button !== 0) return;\n      startDrag(e.clientX, e.clientY, canDragDesktop);\n      document.addEventListener(\"mousemove\", handleMouseMove);\n      document.addEventListener(\"mouseup\", handleMouseUp);\n      e.preventDefault();\n    });\n    if (isTouchDevice) {\n      this.header.addEventListener(\"touchstart\", (e) => {\n        if (e.touches.length !== 1) return;\n        const touch = e.touches[0];\n        if (touch) {\n          startDrag(touch.clientX, touch.clientY, canDragMobile);\n        }\n        document.addEventListener(\"touchmove\", handleTouchMove, { passive: false });\n        document.addEventListener(\"touchend\", handleTouchEnd);\n        e.preventDefault();\n      }, { passive: false });\n    }\n    return this;\n  }\n  set_drag(enable) {\n    this.can_drag = enable;\n    return this;\n  }\n  set_drag_mobile(enable) {\n    if (!this.can_drag) return this;\n    this.can_drag_mobile = enable;\n    return this;\n  }\n  set_state(newState) {\n    if (newState !== \"waiting\" && newState !== \"default\") {\n      console.warn(`Invalid state: ${newState}. State must be 'waiting' or 'default'.`);\n      return this;\n    }\n    console.log(`[set_state] Mudando estado de ${this.state} para: ${newState}`);\n    const oldState = this.state;\n    this.state = newState;\n    const backdropEl = document.getElementById(`${this.id}-backdrop`);\n    if (!backdropEl && (newState === \"waiting\" || this.modal && this.modal.style.display !== \"none\")) {\n      this.create_backdrop();\n    }\n    if (this.backdrop) {\n      if (newState === \"waiting\") {\n        this.backdrop.style.display = \"block\";\n      } else if (oldState === \"waiting\" && newState === \"default\") {\n        this.backdrop.style.display = \"none\";\n      }\n    }\n    this.update_close_btn_state();\n    return this;\n  }\n  close() {\n    if (this.state === \"waiting\") {\n      console.warn(`[UltraDialog ${this.id}] Tentativa de fechar o di\\xE1logo no estado '${this.state}'. A\\xE7\\xE3o ignorada.`);\n      return this;\n    }\n    if (!this.modal) return this;\n    this.modal.remove();\n    this.modal = null;\n    this.destroy_backdrop();\n    console.log(`[UltraDialog ${this.id}] Fechado e removido do DOM.`);\n    return this;\n  }\n  set_z_order(z) {\n    if (!this.modal) return this;\n    this.zOrder = z;\n    this.modal.style.zIndex = z.toString();\n    return this;\n  }\n  set_size(size) {\n    if (!this.modal) return this;\n    this.size = size;\n    this.modal.style.width = `${size}px`;\n    return this;\n  }\n  visible(is_visible) {\n    const should_show = is_visible === void 0 || is_visible === true;\n    if (should_show) {\n      this.show();\n    } else {\n      this.hide();\n    }\n    return this;\n  }\n  /**\n  * This function is used to hide the dialog.\n  * It will hide the dialog from the DOM.\n  * @returns Returns the current instance of the dialog.\n  */\n  hide() {\n    if (this.modal) this.modal.style.display = \"none\";\n    if (this.backdrop) this.backdrop.style.display = \"none\";\n    return this;\n  }\n  /**\n  * This function is used to show the dialog.\n  * It will show the dialog in the DOM.\n  * @returns Returns the current instance of the dialog.\n  */\n  show() {\n    if (!this.modal) {\n      this.default_initialization();\n    } else {\n      this.modal.style.display = \"\";\n    }\n    if (this.backdrop) {\n      this.backdrop.style.display = \"\";\n    }\n    return this;\n  }\n  add_field(field) {\n    if (!this.body) return this;\n    const fieldContainer = document.createElement(\"div\");\n    fieldContainer.className = \"form-group\";\n    fieldContainer.style.marginBottom = \"1rem\";\n    if (field.label && field.fieldtype !== \"Button\") {\n      const label = document.createElement(\"label\");\n      label.innerHTML = field.label;\n      if (field.reqd) {\n        label.innerHTML += ' <span class=\"text-danger\">*</span>';\n      }\n      fieldContainer.appendChild(label);\n    }\n    let input;\n    switch (field.fieldtype) {\n      case \"Text\":\n      case \"Small Text\":\n      case \"Long Text\":\n        input = document.createElement(\"textarea\");\n        input.value = field.default || \"\";\n        input.className = \"form-control\";\n        break;\n      case \"Select\":\n        input = document.createElement(\"select\");\n        input.className = \"form-control\";\n        if (Array.isArray(field.options)) {\n          field.options.forEach((option) => {\n            const opt = document.createElement(\"option\");\n            opt.value = option;\n            opt.text = option;\n            input.add(opt);\n          });\n        }\n        if (field.default) {\n          input.value = field.default;\n        }\n        break;\n      case \"Check\":\n        input = document.createElement(\"input\");\n        input.type = \"checkbox\";\n        input.className = \"form-check-input\";\n        if (field.default) {\n          input.checked = field.default;\n        }\n        break;\n      case \"Button\":\n        input = document.createElement(\"button\");\n        input.className = \"btn btn-primary btn-sm\";\n        input.textContent = field.label;\n        if (field.click) {\n          input.onclick = field.click;\n        }\n        break;\n      case \"Date\":\n        input = document.createElement(\"input\");\n        input.type = \"date\";\n        input.className = \"form-control\";\n        if (field.default) {\n          input.value = field.default;\n        }\n        break;\n      case \"Time\":\n        input = document.createElement(\"input\");\n        input.type = \"time\";\n        input.className = \"form-control\";\n        if (field.default) {\n          input.value = field.default;\n        }\n        break;\n      case \"Int\":\n      case \"Float\":\n        input = document.createElement(\"input\");\n        input.type = \"number\";\n        input.className = \"form-control\";\n        if (field.fieldtype === \"Float\") {\n          input.step = \"0.01\";\n        }\n        if (field.default) {\n          input.value = field.default;\n        }\n        break;\n      case \"Color\":\n        input = document.createElement(\"input\");\n        input.type = \"color\";\n        input.className = \"form-control\";\n        if (field.default) {\n          input.value = field.default;\n        }\n        break;\n      case \"Rating\":\n        input = document.createElement(\"input\");\n        input.type = \"range\";\n        input.className = \"form-range\";\n        input.min = \"0\";\n        input.max = \"5\";\n        if (field.default) {\n          input.value = field.default;\n        }\n        break;\n      default:\n        input = document.createElement(\"input\");\n        input.type = \"text\";\n        input.className = \"form-control\";\n        if (field.default) {\n          input.value = field.default;\n        }\n    }\n    input.id = `field-${field.fieldname}`;\n    if (field.placeholder) {\n      input.placeholder = field.placeholder;\n    }\n    if (field.onchange) {\n      input.onchange = field.onchange;\n    }\n    if (field.read_only) {\n      input.readOnly = true;\n    }\n    if (field.depends_on) {\n      input.setAttribute(\"data-depends-on\", field.depends_on);\n    }\n    if (field.description) {\n      const description = document.createElement(\"small\");\n      description.className = \"form-text text-muted\";\n      description.textContent = field.description;\n      fieldContainer.appendChild(description);\n    }\n    fieldContainer.appendChild(input);\n    this.body?.appendChild(fieldContainer);\n    return this;\n  }\n  removeElementByProperty(propName) {\n    const el = this[propName];\n    if (el && this.modal && this.modal.contains(el)) {\n      el.remove();\n      this[propName] = null;\n    }\n    return this;\n  }\n  removeElementById(elementId) {\n    if (!this.modal) return this;\n    const el = this.modal.querySelector(`#${elementId}`);\n    if (el) el.remove();\n    return this;\n  }\n  removeElementsByName(name) {\n    if (!this.modal) return this;\n    const els = this.modal.querySelectorAll(`[name=\"${name}\"]`);\n    els.forEach((el) => el.remove());\n    return this;\n  }\n  /**\n   * Sets up a MutationObserver to monitor changes in theme-related CSS variables.\n   * Automatically updates modal styles (background, text, border, header, footer) when the theme changes.\n   */\n  load_theme_changer() {\n    const observer = new MutationObserver(() => {\n      const updated = getComputedStyle(document.documentElement);\n      const bgColor = updated.getPropertyValue(\"--bg-color\").trim();\n      const textColor = updated.getPropertyValue(\"--text-color\").trim();\n      const headingBg = updated.getPropertyValue(\"--heading-bg\").trim();\n      const borderColor = updated.getPropertyValue(\"--border-color\").trim();\n      const currentThemeKey = [\n        bgColor,\n        textColor,\n        headingBg,\n        borderColor\n        // If using specific colors, add them to the key as well:\n        // headerBorderColor,\n        // footerBorderColor,\n      ].join(\"|\");\n      if (!this.modal) {\n        console.warn(\"Theme changer: this.modal is not defined.\");\n        return;\n      }\n      if (currentThemeKey !== this.themeKeyCacheLocal) {\n        console.log(\"Theme changed, updating modal, header, and footer styles...\");\n        this.themeKeyCacheLocal = currentThemeKey;\n        if (bgColor) {\n          this.modal.style.backgroundColor = bgColor;\n        }\n        if (textColor) {\n          this.modal.style.color = textColor;\n        }\n        if (borderColor) {\n          this.modal.style.border = `1px solid ${borderColor}`;\n        } else {\n          this.modal.style.border = \"none\";\n        }\n        if (this.header) {\n          this.header.style.backgroundColor = headingBg || bgColor;\n          if (textColor) {\n            this.header.style.color = textColor;\n          }\n          if (borderColor) {\n            this.header.style.borderBottom = `1px solid ${borderColor}`;\n          } else {\n            this.header.style.borderBottom = \"none\";\n          }\n        }\n        if (this.footer) {\n          if (bgColor) {\n            this.footer.style.backgroundColor = bgColor;\n          }\n          if (textColor) {\n            this.footer.style.color = textColor;\n          }\n          if (borderColor) {\n            this.footer.style.borderTop = `1px solid ${borderColor}`;\n          } else {\n            this.footer.style.borderTop = \"none\";\n          }\n        }\n      }\n    });\n    observer.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: [\"class\", \"style\"],\n      // Observe changes to class and style attributes\n      subtree: true\n      // Observe changes in descendants as well\n    });\n  }\n}\nagt.ui.UltraDialog = UltraDialogImpl;\nexport {\n  UltraDialogImpl as UltraDialog\n};\n", "// Copyright (c) 2025, AnyGridTech and contributors\n// For license information, please see license.txt\nfrappe.provide(\"agt.utils.brazil.cnpj\");\nagt.utils.brazil.cnpj.regex = /^(?!00\\.000\\.000\\/0000\\-00)(\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}\\-\\d{2})$/;\nagt.utils.brazil.cnpj.validate = function(frm, cnpj_field) {\n  let cnpj = frm.doc[cnpj_field] || \"\";\n  cnpj = cnpj.replace(/\\D/g, \"\");\n  if (cnpj.length !== 14) {\n    frappe.msgprint(__(\"CNPJ must have 14 digits.\"));\n    frm.set_value(cnpj_field, \"\");\n    return;\n  }\n  if (agt.utils.brazil.cnpj.regex.test(cnpj)) {\n    frappe.msgprint(__(\"Invalid CNPJ number.\"));\n    frm.set_value(cnpj_field, \"\");\n    return;\n  }\n  let length = cnpj.length - 2;\n  let numbers = cnpj.substring(0, length);\n  let digits = cnpj.substring(length);\n  let sum = 0;\n  let pos = length - 7;\n  for (let i = length; i >= 1; i--) {\n    sum += parseInt(numbers.charAt(length - i)) * pos--;\n    if (pos < 2) pos = 9;\n  }\n  let result = sum % 11 < 2 ? 0 : 11 - sum % 11;\n  if (result !== parseInt(digits.charAt(0))) {\n    frappe.msgprint(__(\"Invalid CNPJ number.\"));\n    frm.set_value(cnpj_field, \"\");\n    return;\n  }\n  length += 1;\n  numbers = cnpj.substring(0, length);\n  sum = 0;\n  pos = length - 7;\n  for (let i = length; i >= 1; i--) {\n    sum += parseInt(numbers.charAt(length - i)) * pos--;\n    if (pos < 2) pos = 9;\n  }\n  result = sum % 11 < 2 ? 0 : 11 - sum % 11;\n  if (result !== parseInt(digits.charAt(1))) {\n    frappe.msgprint(__(\"Invalid CNPJ number.\"));\n    frm.set_value(cnpj_field, \"\");\n    return;\n  }\n  agt.utils.brazil.cnpj.format(frm, cnpj_field);\n};\nagt.utils.brazil.cnpj.format = function(frm, cnpj_field) {\n  let cnpj = frm.doc[cnpj_field] || \"\";\n  cnpj = cnpj.replace(/\\D/g, \"\");\n  if (cnpj.length === 14) {\n    frm.set_value(cnpj_field, cnpj.replace(/(\\d{2})(\\d{3})(\\d{3})(\\d{4})(\\d{2})/, \"$1.$2.$3/$4-$5\"));\n  }\n};\nagt.utils.brazil.cnpj.validate_existence = async function(frm, cnpj_field) {\n  const cnpj = frm.doc[cnpj_field]?.replace(/\\D/g, \"\") || \"\";\n  if (cnpj.length !== 14) {\n    frappe.msgprint(__(\"CNPJ must have 14 digits to check existence.\"));\n    return;\n  }\n  try {\n    const response = await frappe.call({\n      method: \"check_cnpj_existence\",\n      args: { cnpj }\n    });\n    if (response.message && response.message.exists) {\n      frappe.msgprint(__(\"CNPJ exists and is valid.\"));\n    } else {\n      frappe.msgprint(__(\"CNPJ not found in official records.\"));\n    }\n  } catch (err) {\n    console.error(\"Error checking CNPJ existence:\", err);\n    frappe.msgprint(__(\"Error checking CNPJ existence. Please try again.\"));\n  }\n};\n", "// Copyright (c) 2025, AnyGridTech and contributors\n// For license information, please see license.txt\nfrappe.provide(\"agt.utils.brazil.cpf\");\nagt.utils.brazil.cpf.regex = /^(?!000\\.000\\.000\\-00)(\\d{3}\\.\\d{3}\\.\\d{3}\\-\\d{2})$/;\nagt.utils.brazil.cpf.validate = function(frm, cpf_field) {\n  let cpf = frm.doc[cpf_field] || \"\";\n  cpf = cpf.replace(/\\D/g, \"\");\n  if (cpf.length !== 11) {\n    frappe.msgprint(__(\"CPF must have 11 digits.\"));\n    frm.set_value(cpf_field, \"\");\n    return;\n  }\n  if (agt.utils.brazil.cpf.regex.test(cpf)) {\n    frappe.msgprint(__(\"Invalid CPF number.\"));\n    frm.set_value(cpf_field, \"\");\n    return;\n  }\n  let sum = 0;\n  let remainder;\n  for (let i = 1; i <= 9; i++) {\n    sum += parseInt(cpf.substring(i - 1, i)) * (11 - i);\n  }\n  remainder = sum * 10 % 11;\n  if (remainder === 10 || remainder === 11) remainder = 0;\n  if (remainder !== parseInt(cpf.substring(9, 10))) {\n    frappe.msgprint(__(\"Invalid CPF number.\"));\n    frm.set_value(cpf_field, \"\");\n    return;\n  }\n  sum = 0;\n  for (let i = 1; i <= 10; i++) {\n    sum += parseInt(cpf.substring(i - 1, i)) * (12 - i);\n  }\n  remainder = sum * 10 % 11;\n  if (remainder === 10 || remainder === 11) remainder = 0;\n  if (remainder !== parseInt(cpf.substring(10, 11))) {\n    frappe.msgprint(__(\"Invalid CPF number.\"));\n    frm.set_value(cpf_field, \"\");\n    return;\n  }\n  agt.utils.brazil.cpf.format(frm, cpf_field);\n};\nagt.utils.brazil.cpf.format = function(frm, cpf_field) {\n  let cpf = frm.doc[cpf_field] || \"\";\n  cpf = cpf.replace(/\\D/g, \"\");\n  if (cpf.length === 11) {\n    frm.set_value(cpf_field, cpf.replace(/(\\d{3})(\\d{3})(\\d{3})(\\d{2})/, \"$1.$2.$3-$4\"));\n  }\n};\n", "// Copyright (c) 2025, AnyGridTech and contributors\n// For license information, please see license.txt\nfrappe.provide(\"agt.utils.brazil\");\nagt.utils.brazil.validate_cnpj_or_cpf = function(frm, field, documentType) {\n  if (documentType === \"cpf\") {\n    agt.utils.brazil.cpf.validate(frm, field);\n  } else if (documentType === \"cnpj\") {\n    agt.utils.brazil.cnpj.validate(frm, field);\n  } else {\n    let value = frm.doc[field] || \"\";\n    value = value.replace(/\\D/g, \"\");\n    if (value.length === 11) {\n      agt.utils.brazil.cpf.validate(frm, field);\n    } else if (value.length === 14) {\n      agt.utils.brazil.cnpj.validate(frm, field);\n    }\n  }\n};\nagt.utils.brazil.format_cnpj_or_cpf = function(frm, field, documentType) {\n  if (documentType === \"cpf\") {\n    agt.utils.brazil.cpf.format(frm, field);\n  } else if (documentType === \"cnpj\") {\n    agt.utils.brazil.cnpj.format(frm, field);\n  } else {\n    let value = frm.doc[field] || \"\";\n    value = value.replace(/\\D/g, \"\");\n    if (value.length === 11) {\n      agt.utils.brazil.cpf.format(frm, field);\n    } else if (value.length === 14) {\n      agt.utils.brazil.cnpj.format(frm, field);\n    }\n  }\n};\n", "// Copyright (c) 2025, AnyGridTech and contributors\n// For license information, please see license.txt\nfrappe.provide(\"agt.utils.brazil.cep\");\nagt.utils.brazil.cep.regex = /^\\d{5}-?\\d{3}$/;\nagt.utils.brazil.cep.format = function(frm, cep_field) {\n  let cep = frm.doc[cep_field] || \"\";\n  cep = cep.replace(/\\D/g, \"\");\n  if (cep.length === 8) {\n    const formatted = `${cep.slice(0, 5)}-${cep.slice(5)}`;\n    frm.set_value(cep_field, formatted);\n    return formatted;\n  }\n  return cep;\n};\nagt.utils.brazil.cep.validate = async function(frm, field, addr, neigh, town, state) {\n  const f = frm.fields_dict[field];\n  if (!f?.$input) return;\n  const $input = f.$input;\n  const setVisualStyle = (status) => {\n    switch (status) {\n      case \"warning\":\n        return `<i class=\"fa fa-exclamation-circle\" style=\"color:#f1c40f\"></i> `;\n      case \"error\":\n        return `<i class=\"fa fa-times-circle\" style=\"color:#e74c3c\"></i> `;\n      case \"success\":\n        return `<i class=\"fa fa-check-circle\" style=\"color:#27ae60\"></i> `;\n      default:\n        return \"\";\n    }\n  };\n  const updateUI = (color, message) => {\n    let status = \"default\";\n    if (color === \"#f1c40f\") status = \"warning\";\n    else if (color === \"red\" || color === \"#e74c3c\") status = \"error\";\n    else if (color === \"green\" || color === \"#27ae60\") status = \"success\";\n    const icon = setVisualStyle(status);\n    f[\"set_description\"](\n      icon + (message ? `<b style=\"color:${color}\">${message}</b>` : \"\")\n    );\n  };\n  const fetchCepData = async (cep) => {\n    try {\n      const response = await frappe.call({\n        method: \"check_cep\",\n        args: { cep }\n      });\n      return response.message;\n    } catch (err) {\n      console.error(\"Erro ao consultar o CEP via server script:\", err);\n      return null;\n    }\n  };\n  const validateAndStyle = async (value) => {\n    const digits = value.replace(/\\D/g, \"\");\n    if (!digits) {\n      updateUI(\"\", \"\");\n      return;\n    }\n    if (digits.length < 8) {\n      updateUI(\"#f1c40f\", \"CEP incompleto\");\n      return;\n    }\n    const data = await fetchCepData(digits);\n    if (!data || data.message === \"CEP n\\xE3o encontrado\") {\n      updateUI(\"red\", \"CEP n\\xE3o encontrado\");\n      return;\n    }\n    frm.set_value(addr, data.street || \"\");\n    frm.set_value(neigh, data.neighborhood || \"\");\n    frm.set_value(town, data.city || \"\");\n    frm.set_value(state, data.state || \"\");\n    updateUI(\"green\", \"CEP v\\xE1lido\");\n  };\n  const formatOnInput = async (e) => {\n    const input = e.target;\n    const originalValue = input.value;\n    const cursorBefore = input.selectionStart || 0;\n    const digitsBeforeCursor = originalValue.slice(0, cursorBefore).replace(/\\D/g, \"\").length;\n    let digits = originalValue.replace(/\\D/g, \"\").slice(0, 8);\n    const currentFieldValue = frm.doc[field]?.toString() || \"\";\n    const isAdding = digits.length > currentFieldValue.replace(/\\D/g, \"\").length;\n    let formatted = digits;\n    if (isAdding && digits.length > 5) {\n      formatted = `${digits.slice(0, 5)}-${digits.slice(5)}`;\n    } else if (!isAdding) {\n      if (digits.length > 5 && originalValue.includes(\"-\")) {\n        formatted = `${digits.slice(0, 5)}-${digits.slice(5)}`;\n      } else {\n        formatted = digits;\n      }\n    }\n    if (formatted !== originalValue) {\n      input.value = formatted;\n      frm.doc[field] = formatted;\n      let newCursor = 0;\n      let countDigits = 0;\n      for (const ch of formatted) {\n        newCursor++;\n        if (/\\d/.test(ch)) countDigits++;\n        if (countDigits >= digitsBeforeCursor) break;\n      }\n      while (newCursor < formatted.length && formatted[newCursor] && /\\D/.test(formatted[newCursor] || \"\")) {\n        newCursor++;\n      }\n      input.setSelectionRange(newCursor, newCursor);\n    }\n    await validateAndStyle(formatted);\n  };\n  $input.off(\".zipcode\").on(\"input.zipcode\", formatOnInput);\n  const currentValue = frm.doc[field]?.toString();\n  if (currentValue) {\n    $input.trigger(\"input.zipcode\");\n  }\n};\n", "// Copyright (c) 2025, AnyGridTech and contributors\n// For license information, please see license.txt\nfrappe.provide(\"agt.utils.brazil\");\nfrappe.provide(\"agt.utils.brazil.phone\");\nagt.utils.brazil.phone.regex = /^\\(\\d{2}\\)\\s\\d{4,5}\\-\\d{4}$/;\nagt.utils.brazil.phone.format = function(frm, phone_field) {\n  let phone = frm.doc[phone_field] || \"\";\n  const digits = phone.replace(/\\D/g, \"\").slice(0, 11);\n  if (digits.length <= 2) {\n    frm.set_value(phone_field, digits);\n    return;\n  }\n  if (digits.length <= 6) {\n    frm.set_value(phone_field, `(${digits.substring(0, 2)}) ${digits.substring(2)}`);\n    return;\n  }\n  if (digits.length <= 10) {\n    frm.set_value(phone_field, `(${digits.substring(0, 2)}) ${digits.substring(2, 6)}-${digits.substring(6)}`);\n    return;\n  }\n  frm.set_value(phone_field, `(${digits.substring(0, 2)}) ${digits.substring(2, 7)}-${digits.substring(7)}`);\n};\nagt.utils.brazil.phone.validate = function(frm, phoneField) {\n  return new Promise((resolve) => {\n    const field = frm.fields_dict[phoneField];\n    if (!field?.$input) {\n      console.error(`validate_phone: O campo '${phoneField}' n\\xE3o foi encontrado ou n\\xE3o \\xE9 um campo de entrada v\\xE1lido.`);\n      return resolve();\n    }\n    const $input = field.$input;\n    const setVisualStyle = (status) => {\n      let icon = \"\";\n      switch (status) {\n        case \"warning\":\n          icon = '<i class=\"fa fa-exclamation-circle\" style=\"color:#f1c40f\"></i> ';\n          break;\n        case \"error\":\n          icon = '<i class=\"fa fa-times-circle\" style=\"color:#e74c3c\"></i> ';\n          break;\n        case \"success\":\n          icon = '<i class=\"fa fa-check-circle\" style=\"color:#27ae60\"></i> ';\n          break;\n        default:\n          icon = \"\";\n      }\n      return icon;\n    };\n    const updateUI = (color, message) => {\n      let status = \"default\";\n      if (color === \"#f1c40f\") status = \"warning\";\n      else if (color === \"red\" || color === \"#e74c3c\") status = \"error\";\n      else if (color === \"green\" || color === \"#27ae60\") status = \"success\";\n      const icon = setVisualStyle(status);\n      field[\"set_description\"](icon + (message ? `<b style='color:${color}'>${message}</b>` : \"\"));\n    };\n    const validatePhoneFormat = (phoneNumber) => {\n      const digits = phoneNumber.replace(/\\D/g, \"\");\n      const hasValidLength = digits.length === 10 || digits.length === 11;\n      if (!hasValidLength) {\n        return { isValid: false, type: \"invalido\" };\n      }\n      const invalidDDDs = [\n        0,\n        1,\n        2,\n        3,\n        4,\n        5,\n        6,\n        7,\n        8,\n        9,\n        10,\n        20,\n        23,\n        25,\n        26,\n        29,\n        30,\n        36,\n        39,\n        40,\n        50,\n        52,\n        56,\n        57,\n        58,\n        59,\n        60,\n        70,\n        72,\n        76,\n        78,\n        80,\n        90\n      ];\n      const ddd = parseInt(digits.substring(0, 2));\n      const hasValidDDD = !invalidDDDs.includes(ddd) && ddd >= 11 && ddd <= 99;\n      if (!hasValidDDD) {\n        return { isValid: false, type: \"invalido\" };\n      }\n      const firstDigitAfterDDD = parseInt(digits.substring(2, 3));\n      if (digits.length === 11 && firstDigitAfterDDD === 9) {\n        return { isValid: true, type: \"celular\" };\n      } else if (digits.length === 10 && firstDigitAfterDDD >= 2 && firstDigitAfterDDD <= 8) {\n        return { isValid: true, type: \"fixo\" };\n      } else {\n        return { isValid: false, type: \"invalido\" };\n      }\n    };\n    const formatPhoneNumber = (value) => {\n      const digits = value.replace(/\\D/g, \"\").slice(0, 11);\n      if (digits.length <= 2) return digits;\n      if (digits.length <= 6) return `(${digits.substring(0, 2)}) ${digits.substring(2)}`;\n      if (digits.length <= 10) return `(${digits.substring(0, 2)}) ${digits.substring(2, 6)}-${digits.substring(6)}`;\n      return `(${digits.substring(0, 2)}) ${digits.substring(2, 7)}-${digits.substring(7)}`;\n    };\n    const formatOnInput = (e) => {\n      const input = e.target;\n      const originalValue = input.value;\n      const originalPos = input.selectionStart || 0;\n      const digitsBeforeCursor = originalValue.slice(0, originalPos).replace(/\\D/g, \"\").length;\n      const digits = originalValue.replace(/\\D/g, \"\");\n      const formattedValue = formatPhoneNumber(digits);\n      if (originalValue !== formattedValue) {\n        input.value = formattedValue;\n        frm.doc[phoneField] = formattedValue;\n        let newCursorPos = 0;\n        let digitsCounted = 0;\n        for (const char of formattedValue) {\n          newCursorPos++;\n          if (/\\d/.test(char)) digitsCounted++;\n          if (digitsCounted >= digitsBeforeCursor) break;\n        }\n        while (newCursorPos < formattedValue.length && formattedValue[newCursorPos] && /\\D/.test(formattedValue[newCursorPos] || \"\")) {\n          newCursorPos++;\n        }\n        input.setSelectionRange(newCursorPos, newCursorPos);\n      }\n      const validation = validatePhoneFormat(formattedValue);\n      if (!digits) {\n        updateUI(\"\", \"\");\n      } else if (digits.length < 10) {\n        updateUI(\"#f1c40f\", \"N\\xFAmero de telefone incompleto\");\n      } else if (!validation.isValid) {\n        updateUI(\"red\", \"DDD ou n\\xFAmero de telefone inv\\xE1lido\");\n      } else if (validation.type === \"celular\") {\n        updateUI(\"green\", \"Celular v\\xE1lido\");\n      } else if (validation.type === \"fixo\") {\n        updateUI(\"green\", \"Telefone fixo v\\xE1lido\");\n      }\n    };\n    $input.off(\".phone\").on(\"input.phone\", formatOnInput);\n    const currentValue = frm.doc[phoneField]?.toString();\n    if (currentValue) {\n      $input.trigger(\"input.phone\");\n    }\n    resolve();\n  });\n};\n", "// Copyright (c) 2025, AnyGridTech and contributors\n// For license information, please see license.txt\nfrappe.provide(\"agt.utils.text\");\nagt.utils.text.normalize = function(text) {\n  return (text || \"\").toLowerCase().normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").replace(/[-_\\s]/g, \"\").replace(/[^a-z0-9]/g, \"\");\n};\nagt.utils.text.is_valid = function(v) {\n  return v !== null && v !== void 0 && (typeof v === \"string\" ? v.trim() !== \"\" : true);\n};\nagt.utils.text.to_snake_case = function(str) {\n  str = str.replace(/\\s+/g, \"_\");\n  str = str.replace(/([a-z])([A-Z])/g, \"$1_$2\");\n  return str.toLowerCase();\n};\nagt.utils.text.to_pascal_case_spaced = function(str) {\n  return str.replace(/([a-z])([A-Z])/g, \"$1 $2\").replace(/[^a-zA-Z0-9 ]/g, \" \").split(/\\s+/).map((word) => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()).join(\" \");\n};\n", "// Copyright (c) 2025, AnyGridTech and contributors\n// For license information, please see license.txt\nfrappe.provide(\"agt.utils\");\nagt.utils.workflow_transition = async function(form, action, callback) {\n  if (!form || !form.states?.frm || !action) {\n    console.error(\"workflow_transition: Par\\xE2metros inv\\xE1lidos.\");\n    return;\n  }\n  frappe.dom.freeze();\n  form.states.frm.selected_workflow_action = action;\n  form.states.frm.script_manager.trigger(\"before_workflow_action\").then(async () => {\n    await frappe.xcall(\"frappe.model.workflow.apply_workflow\", {\n      doc: form.states.frm.doc,\n      action\n    }).then((doc) => {\n      frappe.model.sync(doc);\n      form.states.frm.refresh();\n      form.states.frm.selected_workflow_action = null;\n      form.states.frm.script_manager.trigger(\"after_workflow_action\");\n    }).finally(async () => {\n      frappe.dom.unfreeze();\n      callback && await callback(form);\n    });\n  });\n};\nagt.utils.update_workflow_state = async function(params) {\n  const { doctype, docname, workflow_state, ignore_workflow_validation, callback } = params;\n  return await frappe.call({\n    method: \"update_workflow_state\",\n    args: { doctype, docname, workflow_state, ignore_workflow_validation }\n  }).then(async () => {\n    return await agt.utils.refresh_force().then(async (doc) => {\n      callback && await callback();\n      return doc;\n    });\n  });\n};\nagt.utils.refresh_force = async function() {\n  if (!cur_frm?.doc?.doctype || !cur_frm?.doc?.name) {\n    console.error(\"refresh_force: cur_frm ou documento inv\\xE1lido\");\n    return void 0;\n  }\n  frappe.model.clear_doc(cur_frm.doc.doctype, cur_frm.doc.name);\n  return await agt.utils.doc.get_doc(cur_frm.doc.doctype, cur_frm.doc.name).then((doc) => {\n    if (cur_frm?.states?.frm?.refresh) {\n      cur_frm.states.frm.refresh();\n    }\n    return doc;\n  }).catch((error) => {\n    console.error(\"Error refreshing document:\", error);\n    return void 0;\n  });\n};\nagt.utils.validate_cpf_regex = function(cpf) {\n  if (!cpf || typeof cpf !== \"string\") return false;\n  cpf = cpf.trim();\n  return /^(?!000\\.000\\.000\\-00)(\\d{3}\\.\\d{3}\\.\\d{3}\\-\\d{2})$/.test(cpf);\n};\nagt.utils.validate_cnpj_regex = function(cnpj) {\n  if (!cnpj || typeof cnpj !== \"string\") return false;\n  cnpj = cnpj.trim();\n  return /^(?!00\\.000\\.000\\/0000\\-00)(\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}\\-\\d{2})$/.test(cnpj);\n};\nagt.utils.validate_cpf = function(cpf) {\n  const d = (cpf || \"\").replace(/\\D/g, \"\");\n  if (d.length !== 11 || /^(\\d)\\1+$/.test(d)) return false;\n  let sum = 0;\n  for (let i = 0; i < 9; i++) sum += +(d[i] || 0) * (10 - i);\n  let check = sum * 10 % 11;\n  if (check === 10) check = 0;\n  if (check !== +(d[9] || 0)) return false;\n  sum = 0;\n  for (let i = 0; i < 10; i++) sum += +(d[i] || 0) * (11 - i);\n  check = sum * 10 % 11;\n  if (check === 10) check = 0;\n  return check === +(d[10] || 0);\n};\nagt.utils.validate_cnpj = function(cnpj) {\n  const d = (cnpj || \"\").replace(/\\D/g, \"\");\n  if (d.length !== 14 || /^(\\d)\\1+$/.test(d)) return false;\n  const calc = (base, weights) => base.split(\"\").reduce((sum, n, i) => sum + +(n || 0) * (weights[i] || 0), 0);\n  const w1 = [5, 4, 3, 2, 9, 8, 7, 6, 5, 4, 3, 2];\n  const w2 = [6, ...w1];\n  let check = calc(d.slice(0, 12), w1) % 11;\n  let digit = check < 2 ? 0 : 11 - check;\n  if (digit !== +(d[12] || 0)) return false;\n  check = calc(d.slice(0, 13), w2) % 11;\n  digit = check < 2 ? 0 : 11 - check;\n  return digit === +(d[13] || 0);\n};\nagt.utils.validate_cnpj_existence = async function(cnpj) {\n  if (!cnpj || typeof cnpj !== \"string\") return false;\n  const digits = cnpj.replace(/\\D/g, \"\");\n  if (digits.length !== 14) return false;\n  try {\n    const response = await frappe.call({\n      method: \"check_cnpj\",\n      args: { cnpj: digits }\n    });\n    const data = response?.message;\n    return !!data && !!data.cnpj && data.cnpj.replace(/\\D/g, \"\") === digits;\n  } catch (error) {\n    console.error(\"Erro ao validar CNPJ:\", error);\n    return false;\n  }\n};\nagt.utils.format_doc = function(doc, type) {\n  let digits = (doc || \"\").replace(/\\D/g, \"\");\n  const formatCpf = (d) => {\n    let formatted = d.slice(0, 11);\n    if (formatted.length > 3) formatted = formatted.replace(/^(\\d{3})(\\d)/, \"$1.$2\");\n    if (formatted.length > 6) formatted = formatted.replace(/^(\\d{3})\\.(\\d{3})(\\d)/, \"$1.$2.$3\");\n    if (formatted.length > 9) formatted = formatted.replace(/^(\\d{3})\\.(\\d{3})\\.(\\d{3})(\\d)/, \"$1.$2.$3-$4\");\n    return formatted;\n  };\n  const formatCnpj = (d) => {\n    let formatted = d.slice(0, 14);\n    if (formatted.length > 2) formatted = formatted.replace(/^(\\d{2})(\\d)/, \"$1.$2\");\n    if (formatted.length > 5) formatted = formatted.replace(/^(\\d{2})\\.(\\d{3})(\\d)/, \"$1.$2.$3\");\n    if (formatted.length > 8) formatted = formatted.replace(/^(\\d{2})\\.(\\d{3})\\.(\\d{3})(\\d)/, \"$1.$2.$3/$4\");\n    if (formatted.length > 12) formatted = formatted.replace(/^(\\d{2})\\.(\\d{3})\\.(\\d{3})\\/(\\d{4})(\\d)/, \"$1.$2.$3/$4-$5\");\n    return formatted;\n  };\n  if (type === \"Pessoa F\\xEDsica\") {\n    return formatCpf(digits);\n  }\n  if (type === \"Pessoa Jur\\xEDdica\") {\n    return formatCnpj(digits);\n  }\n  return digits.length < 12 ? formatCpf(digits) : formatCnpj(digits);\n};\nagt.utils.document_id = async function(frm, docField, typeField) {\n  const field = frm.fields_dict[docField];\n  if (!field?.$input) {\n    console.error(`document_id: O campo '${docField}' n\\xE3o foi encontrado ou n\\xE3o \\xE9 um campo de entrada v\\xE1lido.`);\n    return;\n  }\n  const $input = field.$input;\n  const setVisualStyle = (status) => {\n    let icon = \"\";\n    switch (status) {\n      case \"warning\":\n        icon = '<i class=\"fa fa-exclamation-circle\" style=\"color:#f1c40f\"></i> ';\n        break;\n      case \"error\":\n        icon = '<i class=\"fa fa-times-circle\" style=\"color:#e74c3c\"></i> ';\n        break;\n      case \"success\":\n        icon = '<i class=\"fa fa-check-circle\" style=\"color:#27ae60\"></i> ';\n        break;\n      default:\n        icon = \"\";\n    }\n    return icon;\n  };\n  const updateUI = (color, message) => {\n    let status = \"default\";\n    if (color === \"#f1c40f\") status = \"warning\";\n    else if (color === \"red\" || color === \"#e74c3c\") status = \"error\";\n    else if (color === \"green\" || color === \"#27ae60\") status = \"success\";\n    const icon = setVisualStyle(status);\n    field.set_description(icon + (message ? `<b style='color:${color}'>${message}</b>` : \"\"));\n  };\n  const validateAndStyle = () => {\n    const value = $input.val() || \"\";\n    const digits = value.replace(/\\D/g, \"\");\n    const docType = typeField ? frm.doc[typeField] : null;\n    if (docType && docType !== \"Pessoa F\\xEDsica\" && docType !== \"Pessoa Jur\\xEDdica\") {\n      frm.set_df_property(docField, \"read_only\", 1);\n      frm.set_df_property(docField, \"hidden\", 1);\n      updateUI(\"#f1c40f\", \"Selecione o tipo de documento antes de preencher.\");\n      return;\n    } else {\n      frm.set_df_property(docField, \"read_only\", 0);\n      frm.set_df_property(docField, \"hidden\", 0);\n    }\n    if (!digits) {\n      updateUI(\"\", \"\");\n      return;\n    }\n    if (docType === \"Pessoa F\\xEDsica\") {\n      if (digits.length < 11) {\n        updateUI(\"#f1c40f\", \"CPF incompleto\");\n      } else {\n        if (agt.utils.validate_cpf(digits)) {\n          updateUI(\"green\", \"CPF v\\xE1lido\");\n        } else {\n          updateUI(\"red\", \"CPF inv\\xE1lido. Favor corrigir.\");\n        }\n      }\n      return;\n    }\n    if (docType === \"Pessoa Jur\\xEDdica\") {\n      if (digits.length < 14) {\n        updateUI(\"#f1c40f\", \"CNPJ incompleto\");\n      } else {\n        if (agt.utils.validate_cnpj(digits)) {\n          updateUI(\"#27ae60\", \"CNPJ v\\xE1lido sintaticamente. Verificando exist\\xEAncia...\");\n          agt.utils.validate_cnpj_existence(digits).then((exists) => {\n            if (exists) {\n              updateUI(\"green\", \"CNPJ existe e est\\xE1 ativo\");\n            } else {\n              updateUI(\"red\", \"CNPJ n\\xE3o encontrado na base nacional\");\n            }\n          });\n        } else {\n          updateUI(\"red\", \"CNPJ inv\\xE1lido. Favor corrigir.\");\n        }\n      }\n      return;\n    }\n    if (docType === null) {\n      if (digits.length < 11 || digits.length > 11 && digits.length < 14) {\n        updateUI(\"#f1c40f\", \"CPF ou CNPJ incompleto.\");\n      } else if (digits.length === 11) {\n        if (agt.utils.validate_cpf(digits)) {\n          updateUI(\"green\", \"CPF v\\xE1lido\");\n        } else {\n          updateUI(\"red\", \"CPF ou CNPJ inv\\xE1lido ou incompleto\");\n        }\n      } else if (digits.length >= 14) {\n        const cnpDigits = digits.slice(0, 14);\n        if (agt.utils.validate_cnpj(cnpDigits)) {\n          updateUI(\"green\", \"CNPJ v\\xE1lido\");\n        } else {\n          updateUI(\"red\", \"CNPJ inv\\xE1lido. Favor corrigir.\");\n        }\n      }\n    }\n  };\n  const formatOnInput = (e) => {\n    const input = e.target;\n    const originalValue = input.value;\n    const docType = typeField ? frm.doc[typeField] : null;\n    const originalPos = input.selectionStart || 0;\n    const digitsBeforeCursor = originalValue.slice(0, originalPos).replace(/\\D/g, \"\").length;\n    let digits = originalValue.replace(/\\D/g, \"\");\n    const maxLength = docType === \"Pessoa Jur\\xEDdica\" ? 14 : docType === \"Pessoa F\\xEDsica\" ? 11 : 14;\n    if (digits.length > maxLength) {\n      digits = digits.slice(0, maxLength);\n    }\n    const formatCpf = (d) => d.replace(/(\\d{3})(\\d)/, \"$1.$2\").replace(/(\\d{3})\\.(\\d{3})(\\d)/, \"$1.$2.$3\").replace(/(\\d{3})\\.(\\d{3})\\.(\\d{3})(\\d{1,2})/, \"$1.$2.$3-$4\");\n    const formatCnpj = (d) => d.replace(/(\\d{2})(\\d)/, \"$1.$2\").replace(/(\\d{2})\\.(\\d{3})(\\d)/, \"$1.$2.$3\").replace(/(\\d{2})\\.(\\d{3})\\.(\\d{3})(\\d)/, \"$1.$2.$3/$4\").replace(/(\\d{2})\\.(\\d{3})\\.(\\d{3})\\/(\\d{4})(\\d)/, \"$1.$2.$3/$4-$5\");\n    let formattedValue = digits;\n    if (docType === \"Pessoa F\\xEDsica\") {\n      formattedValue = formatCpf(digits);\n    } else if (docType === \"Pessoa Jur\\xEDdica\") {\n      formattedValue = formatCnpj(digits);\n    } else {\n      formattedValue = digits.length > 11 ? formatCnpj(digits) : formatCpf(digits);\n    }\n    if (originalValue !== formattedValue) {\n      input.value = formattedValue;\n      frm.doc[docField] = formattedValue;\n      let newCursorPos = 0;\n      let digitsCounted = 0;\n      for (const char of formattedValue) {\n        newCursorPos++;\n        if (/\\d/.test(char)) digitsCounted++;\n        if (digitsCounted >= digitsBeforeCursor) break;\n      }\n      while (newCursorPos < formattedValue.length && formattedValue[newCursorPos] && /\\D/.test(formattedValue[newCursorPos] || \"\")) {\n        newCursorPos++;\n      }\n      input.setSelectionRange(newCursorPos, newCursorPos);\n    }\n    validateAndStyle();\n  };\n  $input.off(\".cpfcnpj\").on(\"input.cpfcnpj\", formatOnInput);\n  if (typeField && frm.fields_dict[typeField]?.$input) {\n    frm.fields_dict[typeField].$input.off(`.cpfcnpjtype_${docField}`).on(`change.cpfcnpjtype_${docField}`, () => {\n      validateAndStyle();\n      $input.trigger(\"input.cpfcnpj\");\n    });\n  }\n  validateAndStyle();\n};\nagt.utils.redirect_by_ref = function(ref, title, message, indicator, url, delay = 3e3, newTab = true) {\n  if (!ref || !url) {\n    console.error(\"redirect_by_ref: ref e url s\\xE3o obrigat\\xF3rios\");\n    return;\n  }\n  frappe.msgprint({\n    title: title || \"Redirecionando...\",\n    message: message ?? \"\",\n    indicator: indicator || \"blue\"\n  });\n  setTimeout(() => {\n    if (url) {\n      if (newTab) {\n        window.open(url, \"_blank\");\n      } else {\n        window.location.href = url;\n      }\n    }\n  }, delay);\n};\nagt.utils.build_doc_url = function(doctype, docname) {\n  const doctypeSlug = doctype.replace(/([a-z])([A-Z])/g, \"$1-$2\").replace(/\\s+/g, \"-\").replace(/_/g, \"-\").toLowerCase();\n  return `${window.location.origin}/app/${doctypeSlug}/${encodeURIComponent(docname)}`;\n};\nagt.utils.redirect_after_create_doc = function(success, url, docname, doctype) {\n  if (success) {\n    frappe.msgprint({\n      title: \"Redirecionando...\",\n      message: `${doctype} criado com sucesso! Voc\\xEA ser\\xE1 direcionado para o documento (${docname}).`,\n      indicator: \"green\"\n    });\n  } else {\n    frappe.msgprint({\n      title: \"Redirecionando...\",\n      message: `Voc\\xEA ser\\xE1 direcionado para o documento j\\xE1 existente (${docname}).`,\n      indicator: \"blue\"\n    });\n  }\n  setTimeout(() => {\n    window.location.href = url;\n  }, 2e3);\n};\nagt.utils.get_item_info = async function(item_name, sn) {\n  if (!item_name || typeof item_name !== \"string\") {\n    console.error(\"get_item_info: item_name \\xE9 obrigat\\xF3rio\");\n    return;\n  }\n  const all_items = await frappe.db.get_list(\"Item\", {\n    fields: [\"item_code\", \"custom_mppt\", \"item_name\"]\n  }).catch((e) => {\n    console.error(\"Erro ao buscar itens:\", e);\n    return null;\n  });\n  if (!all_items || !all_items.length) return;\n  const normalizedInput = agt.utils.text.normalize(item_name);\n  const filtered_items = all_items.filter(\n    (item) => agt.utils.text.normalize(item.item_name) === normalizedInput\n  );\n  if (!filtered_items.length) return;\n  const uniqueMppts = [...new Set(filtered_items.map((item) => item.custom_mppt))];\n  if (uniqueMppts.length === 1) return filtered_items[0];\n  const dialog_title = `Selecione a quantidade de MPPTs (${item_name}${sn ? ` - ${sn}` : \"\"})`;\n  return new Promise((resolve) => {\n    agt.utils.dialog.load({\n      title: dialog_title,\n      fields: [\n        {\n          fieldname: \"mppt\",\n          label: \"MPPT\",\n          fieldtype: \"Select\",\n          options: uniqueMppts,\n          reqd: true\n        }\n      ],\n      static: false,\n      draggable: false,\n      lockClose: true,\n      primary_action: async function(values) {\n        const mppt = values.mppt;\n        if (!mppt) return;\n        const item = filtered_items.find((item2) => item2.custom_mppt === mppt);\n        agt.utils.dialog.close_by_title(dialog_title);\n        resolve(item);\n      }\n    });\n  });\n};\nagt.utils.get_growatt_sn_info = async function(serial_no) {\n  if (!serial_no || typeof serial_no !== \"string\") {\n    console.error(\"get_growatt_sn_info: serial_no \\xE9 obrigat\\xF3rio\");\n    return void 0;\n  }\n  try {\n    const sn = await frappe.call({\n      method: \"get_growatt_sn_info\",\n      args: { deviceSN: serial_no }\n    });\n    const fail = !sn || !sn.message?.code || sn.message.code !== 200;\n    if (fail) return void 0;\n    return sn.message;\n  } catch (error) {\n    console.error(\"Erro ao buscar informa\\xE7\\xF5es do SN Growatt:\", error);\n    return void 0;\n  }\n};\nagt.utils.validate_serial_number = function(sn, type) {\n  if (!sn || typeof sn !== \"string\") return false;\n  sn = sn.trim().toUpperCase();\n  const sn_regex = /^[A-Z0-9][A-Z][A-Z0-9]([A-Z0-9]{7}|[A-Z0-9]{13})$/;\n  const iv_sn_regex = /^[A-Z0-9]{3}[A-Z0-9]{7}$/;\n  const other_sn_regex = /^[A-Z0-9]{3}[A-Z0-9]{13}$/;\n  let output = false;\n  if (type === \"inverter\") {\n    output = iv_sn_regex.test(sn);\n  } else if (type === \"battery\" || type === \"ev_charger\") {\n    output = other_sn_regex.test(sn);\n  } else {\n    output = sn_regex.test(sn);\n  }\n  return output;\n};\nagt.utils.get_value_from_any_doc = async function(frm, doctype, docnameField, fieldName) {\n  const docname = frm.doc[docnameField];\n  if (!docname) return null;\n  try {\n    const result = await frappe.db.get_doc(doctype, docname);\n    return result?.[fieldName] ?? null;\n  } catch (e) {\n    console.error(`Erro ao buscar campo ${fieldName} do ${doctype}:`, e);\n    return null;\n  }\n};\n", "// Copyright (c) 2025, AnyGridTech and contributors\n// For license information, please see license.txt\nfrappe.provide(\"agt.utils.db\");\nagt.utils.db.filter_join = async function(steps) {\n  let results = [];\n  for (let i = 0; i < steps.length; i++) {\n    const step = steps[i];\n    if (!step) continue;\n    const filters = { ...step.filters };\n    if (i > 0 && step.joinOn && results.length > 0) {\n      const joinOn = step.joinOn;\n      const joinValues = results.map((item) => item[joinOn.sourceField]);\n      filters[joinOn.targetField] = [\"in\", joinValues];\n    }\n    if (step.joinOn && results.length === 0) {\n      console.warn(`No results found for step ${i + 1}. Skipping further joins.`);\n      break;\n    }\n    const response = await frappe.call({\n      method: \"backend_get_all\",\n      args: {\n        doctype: step.doctype,\n        filters,\n        fields: step.fields\n      }\n    });\n    results = response.message.data || [];\n  }\n  return results;\n};\n", "// Copyright (c) 2025, AnyGridTech and contributors\n// For license information, please see license.txt\nfrappe.provide(\"agt.utils.dialog\");\nagt.utils.dialog.created = [];\nagt.utils.dialog.load = function(diagConfig) {\n  const dialog = new frappe.ui.Dialog(diagConfig);\n  agt.utils.dialog.created.push(dialog);\n  $(dialog[\"wrapper\"]).on(\"hidden.bs.modal\", () => {\n    const index = agt.utils.dialog.created.indexOf(dialog);\n    if (index > -1) {\n      agt.utils.dialog.created.splice(index, 1);\n      agt.utils.dialog.refresh_dialog_stacking();\n    }\n  });\n  dialog.show();\n  setTimeout(() => agt.utils.dialog.refresh_dialog_stacking(), 50);\n  return dialog;\n};\nagt.utils.dialog.close_all = function() {\n  const dialogs = [...agt.utils.dialog.created];\n  dialogs.forEach((dialog) => {\n    if (dialog) {\n      dialog.hide();\n      const $backdrop = $(dialog[\"wrapper\"]).data(\"bs.modal\")?.$backdrop;\n      $backdrop?.remove();\n    }\n  });\n  agt.utils.dialog.created = [];\n};\nagt.utils.dialog.close_by_title = function(title) {\n  const dialogIndex = agt.utils.dialog.created.findIndex((d) => d.title === title);\n  if (dialogIndex >= 0) {\n    const dialog = agt.utils.dialog.created[dialogIndex];\n    if (dialog) {\n      dialog.hide();\n      const $backdrop = $(dialog[\"wrapper\"]).data(\"bs.modal\")?.$backdrop;\n      $backdrop?.remove();\n      agt.utils.dialog.created.splice(dialogIndex, 1);\n      agt.utils.dialog.refresh_dialog_stacking();\n    }\n  }\n};\nagt.utils.dialog.show_debugger_alert = function(_frm, message, indicator, timeout = 10) {\n  if (frappe.user.has_role([\"IT\", \"Administrator\", \"System Manager\"])) {\n    frappe.show_alert({ message: __(message), indicator }, timeout);\n  }\n};\nagt.utils.dialog.refresh_dialog_stacking = function() {\n  if (typeof $ === \"undefined\") {\n    console.error(\"jQuery is not loaded. Unable to refresh dialog stacking.\");\n    return;\n  }\n  const baseModalIndex = 1051;\n  const baseBackdropIndex = 1050;\n  agt.utils.dialog.created.forEach((dialog, index) => {\n    if ($(dialog[\"wrapper\"]).is(\":visible\")) {\n      const zIndex = baseModalIndex + index * 2;\n      $(dialog[\"wrapper\"]).css(\"z-index\", zIndex);\n      const modalId = $(dialog[\"wrapper\"]).attr(\"id\");\n      $(`.modal-backdrop[data-modal-id=\"${modalId}\"]`).css(\"z-index\", baseBackdropIndex + index * 2);\n      const $backdrop = $(dialog[\"wrapper\"]).data(\"bs.modal\")?.$backdrop;\n      if ($backdrop && !$backdrop.attr(\"data-modal-id\")) {\n        $backdrop.attr(\"data-modal-id\", modalId);\n      }\n    }\n  });\n};\n", "// Copyright (c) 2025, AnyGridTech and contributors\n// For license information, please see license.txt\nfrappe.provide(\"agt.utils.doc\");\nagt.utils.doc.create_doc = async function(doctype, fields_target, fields_dict) {\n  const meta = await agt.utils.doc.get_doc_meta(doctype);\n  if (!meta) {\n    frappe.throw(`Could not fetch meta for doctype: ${doctype}`);\n    return;\n  }\n  const fields_record = Object.entries(fields_dict).reduce((acc, [k, v]) => {\n    if (typeof v.value === \"number\" || typeof v.value === \"string\") {\n      acc[k] = v.value;\n    }\n    return acc;\n  }, {});\n  const valid_fields = meta.fields.map((field) => field.fieldname);\n  for (const targetField of fields_target) {\n    if (!valid_fields.includes(targetField)) continue;\n    let value;\n    if (targetField === \"docname\" && cur_frm?.docname) {\n      value = cur_frm.docname;\n    } else if (cur_frm?.doc && targetField in cur_frm.doc) {\n      value = cur_frm.doc[targetField];\n    }\n    if (value !== void 0) {\n      fields_record[targetField] = value;\n    }\n  }\n  const valid_updates = {};\n  for (const [fieldname, field] of Object.entries(fields_record)) {\n    if (!valid_fields.includes(fieldname)) continue;\n    if (field === void 0 || field === null || field === \"\") continue;\n    valid_updates[fieldname] = field;\n  }\n  if (Object.keys(valid_updates).length === 0) {\n    frappe.throw(`No valid fields to create the document: ${doctype}`);\n    return;\n  }\n  const doc = frappe.model.get_new_doc(doctype);\n  for (const [name, value] of Object.entries(valid_updates)) {\n    if (name === \"workflow_state\" || name === \"naming_series\") continue;\n    doc[name] = value;\n  }\n  const r1 = await frappe.db.insert(doc).catch((e) => console.error(e));\n  return r1?.name;\n};\nagt.utils.doc.update_doc = async function(doctype, docname, fields_record, retryCount = 0) {\n  const maxRetries = 3;\n  if (retryCount >= maxRetries) {\n    console.error(`Max retries (${maxRetries}) reached. Aborting update.`);\n    return;\n  }\n  try {\n    const doc = await frappe.db.get_doc(doctype, docname).catch((e) => console.error(e));\n    if (!doc) {\n      console.error(`Document '${docname}' not found.`);\n      return;\n    }\n    const valid_updates = {};\n    const ignore_fields = [\"workflow_state\", \"naming_series\", \"creation\", \"doctype\", \"modified\", \"name\", \"owner\"];\n    for (const [f, v] of Object.entries(fields_record)) {\n      if (ignore_fields.includes(f) && doctype !== \"Serial No\") continue;\n      if (doc[f] === void 0) continue;\n      if (doc[f] === v) continue;\n      if (doc[f] === null && v === \"\") continue;\n      if (doc[f] === \"\" && v === null) continue;\n      console.log(`[${doctype} - ${docname}] Setting ${f} to ${v}`);\n      doc[f] = v;\n      valid_updates[f] = v;\n    }\n    if (Object.keys(valid_updates).length === 0) {\n      console.log(`[${doctype} - ${docname}] No valid fields to update`);\n      return;\n    }\n    await frappe.call({\n      method: \"frappe.client.save\",\n      args: { doc }\n    });\n    if (doctype === cur_frm.doctype && docname === cur_frm.docname) {\n      const updatedDoc = await frappe.call({\n        method: \"frappe.client.get\",\n        args: { doctype, name: docname }\n      }).then(({ message }) => message);\n      frappe.model.sync([updatedDoc]);\n      cur_frm.states.frm.refresh();\n    }\n    console.log(`Document '${docname}' updated successfully.`);\n  } catch (error) {\n    if (error?.message?.includes(\"Document has been modified after you have opened it\")) {\n      console.warn(\"Timestamp mismatch detected. Refetching document...\");\n      return await agt.utils.doc.update_doc(doctype, docname, fields_record, retryCount + 1);\n    } else {\n      console.error(`Error saving document '${docname}':`, error);\n    }\n  }\n};\nagt.utils.doc.get_doc = async function(doctype, docname) {\n  return await frappe.call({\n    method: \"frappe.client.get\",\n    args: { doctype, name: docname }\n  }).then(async (doc) => {\n    frappe.model.clear_doc(doctype, docname);\n    frappe.model.sync([doc.message]);\n    cur_frm.states.frm.refresh();\n    return doc.message;\n  });\n};\nagt.utils.doc.share_doc = async function(doctype, docname, users) {\n  const shared_users = await frappe.call({\n    method: \"frappe.share.get_users\",\n    args: { doctype, name: docname }\n  }).then(({ message }) => message);\n  for (const user of users) {\n    const shared = shared_users.find((u) => u.user === user.user);\n    if (shared?.read === user.read && shared?.write === user.write && shared?.share === user.share) {\n      console.log(`Document '${docname}' already shared with user '${user.user}'`);\n      continue;\n    }\n    await frappe.call({\n      method: \"frappe.share.add\",\n      args: {\n        doctype,\n        name: docname,\n        user: user.user,\n        read: user.read,\n        write: user.write,\n        share: user.share,\n        owner: user.owner || frappe.session.user_email\n      }\n    }).then(() => console.log(`Document '${docname}' shared with user '${user.user}'`));\n  }\n};\nagt.utils.doc.get_doc_meta = async function(doctype) {\n  await frappe.model.with_doctype(doctype);\n  return frappe.get_meta(doctype);\n};\n", "// Copyright (c) 2025, AnyGridTech and contributors\n// For license information, please see license.txt\nfrappe.provide(\"agt.utils.form\");\nfrappe.provide(\"agt.utils.form.field\");\nagt.utils.form.field.is_empty = function(value) {\n  if (!value) return true;\n  const text = value.replace(/<[^>]*>/g, \"\").replace(/&nbsp;/g, \"\").trim();\n  return text === \"\";\n};\nagt.utils.form.field.set_properties = function(frm, configs) {\n  Object.entries(configs).forEach(([fieldname, opts]) => {\n    if (opts.hidden !== void 0) {\n      const $el = frm.$wrapper.find(`[data-fieldname='${fieldname}']`);\n      $el.toggle(!opts.hidden);\n    }\n    if (opts.readonly !== void 0) {\n      frm.set_df_property(fieldname, \"read_only\", opts.readonly ? 1 : 0);\n    }\n    if (opts.reqd !== void 0) {\n      frm.set_df_property(fieldname, \"reqd\", opts.reqd ? 1 : 0);\n    }\n    if (opts.label !== void 0) {\n      frm.set_df_property(fieldname, \"label\", opts.label);\n    }\n    if (opts.description !== void 0) {\n      frm.set_df_property(fieldname, \"description\", opts.description);\n    }\n  });\n  frm.refresh_fields();\n};\nagt.utils.form.field.get_js_visible_fields = function(form) {\n  const visible_fields = [];\n  for (let field of Object.values(form.fields_dict)) {\n    if ([\"Table\", \"Section Break\", \"Column Break\", \"HTML\", \"Fold\"].includes(field.df.fieldtype)) continue;\n    if (!field.df.depends_on) continue;\n    const depends_on_json_fnc = field.df.depends_on.replace(\"eval:\", \"\");\n    const is_visible = frappe.utils.eval(depends_on_json_fnc, {\n      doc: form.doc\n    });\n    if (is_visible) visible_fields.push(field);\n  }\n  return visible_fields;\n};\nagt.utils.form.field.validate_js_visible_fields = function(form, workflow_state) {\n  const js_visible_fields = agt.utils.form.field.get_js_visible_fields(form);\n  const title = __(\"Aten\\xE7\\xE3o!\");\n  const indicator = \"red\";\n  function validate_js_visible_fields_msg(fields) {\n    const throw_html = [];\n    for (let field of fields) {\n      throw_html.push(`<li>${field.df.label}</li>`);\n    }\n    const msg = `<p>${__(\"\\u26A0\\uFE0F Os campos abaixo s\\xE3o obrigat\\xF3rios: \")}</p><ul>${throw_html.join(\"\")}</ul>`;\n    return msg;\n  }\n  const throw_error = () => {\n    if (workflow_state !== form.doc.workflow_state) return;\n    if (!js_visible_fields.length) return;\n    const message = validate_js_visible_fields_msg(js_visible_fields);\n    frappe.throw({ title, message, indicator });\n  };\n  const msgprint = () => {\n    if (workflow_state !== form.doc.workflow_state) return;\n    if (!js_visible_fields.length) return;\n    const message = validate_js_visible_fields_msg(js_visible_fields);\n    frappe.msgprint({ title, message, indicator });\n  };\n  return { throw_error, msgprint };\n};\nagt.utils.form.field.turn_into_link = function(frm, fieldName, docType) {\n  const field = frm.fields_dict[fieldName];\n  if (field && field.df.read_only && field.$wrapper) {\n    const $wrapper = field.$wrapper;\n    $wrapper.css(\"position\", \"relative\");\n    $wrapper.find(\".serial-link-mask\").remove();\n    $wrapper.append(\n      `<a class=\"serial-link-mask\" href=\"/app/${docType}/${encodeURIComponent(frm.doc[fieldName])}\" target=\"_blank\"\n        style=\"position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;z-index:10;cursor:pointer;\"></a>`\n    );\n  }\n};\nagt.utils.form.mirror_checklist_table = async function(form, doctype, tableField, childname, docname, workflowStateField) {\n  const name = form.doc.name;\n  const fields = [\"name\"];\n  if (workflowStateField) fields.push(\"workflow_state\");\n  const remote = await frappe.db.get_list(doctype, {\n    filters: { [childname]: name },\n    fields\n  }).catch((e) => {\n    console.error(`Error fetching ${doctype}:`, e);\n    return [];\n  });\n  const currentTable = form.doc[tableField] || [];\n  let needsUpdate = !await agt.utils.table.is_sync(currentTable, remote, docname, workflowStateField);\n  if (!needsUpdate) {\n    console.log(`Tabela '${tableField}' j\\xE1 est\\xE1 sincronizada.`);\n    return;\n  }\n  form.doc[tableField] = remote.map((item) => {\n    const row = { [docname]: item.name };\n    if (workflowStateField && item.workflow_state) {\n      row[workflowStateField] = item.workflow_state;\n    }\n    return row;\n  });\n  form.dirty();\n  form.refresh_field(tableField);\n  await form.save();\n  console.log(`Tabela '${tableField}' sincronizada.`);\n};\nagt.utils.form.assign_parent_doc_name = function(_form) {\n};\nagt.utils.form.adjust_html_elements = function(form, options) {\n  if (!form?.doc) return;\n  const elementsToRemove = {\n    removeTabs: \".form-tabs-list\",\n    removeNavFormsTabs: \".nav.form-tabs\",\n    removeSidebar: \".col-lg-2.layout-side-section\",\n    removeAssignments: \".form-assignments\",\n    removeAssignmentsButton: \".button.add-assignments-btn\",\n    removeAttachments: \".form-attachments\",\n    removeAttachmentsButton: \".button.add-attachments-btn\",\n    removeShared: \".form-shared\",\n    removeTags: \".form-tags\",\n    removeSidebarStats: \".form-sidebar-stats\",\n    removeSidebarMenu: \".list-unstyled.sidebar-menu.text-muted\",\n    removeSidebarReset: \"button.btn-reset.sidebar-toggle-btn\",\n    removeSidebarToggle: \"span.sidebar-toggle-btn\",\n    removeActivityBar: \".form-footer\"\n  };\n  Object.entries(elementsToRemove).forEach(([option, selector]) => {\n    if (options[option]) {\n      const el = document.querySelector(selector);\n      if (el) {\n        el.style.display = \"none\";\n        el.remove();\n      }\n    }\n  });\n  if (options.removeTabs && !document.querySelector(\".form-tabs-list\")) {\n    document.querySelector(\".form-layout\")?.setAttribute(\"style\", \"border-top: none\");\n  }\n};\nagt.utils.form.render_doc_fields_table = async function(wrapper, docOrRows, fields, meta) {\n  if (!wrapper || !docOrRows || !fields?.length) {\n    console.error(\"[render_doc_fields_table] Invalid arguments!\");\n    return;\n  }\n  const isTable = Array.isArray(docOrRows) || typeof docOrRows === \"object\" && docOrRows !== null && \"length\" in docOrRows && typeof docOrRows.length === \"number\";\n  const arr = isTable ? Array.isArray(docOrRows) ? docOrRows.filter((el) => typeof el === \"object\" && el !== null) : Array.from(docOrRows).filter((el) => typeof el === \"object\" && el !== null) : [];\n  if (!meta) {\n    const doctype = isTable && arr.length > 0 ? arr[0]?.[\"doctype\"] : docOrRows?.[\"doctype\"];\n    if (doctype) meta = await frappe.get_meta?.(doctype);\n  }\n  const escapeHtml = (value) => {\n    if (value === null || value === void 0) return \"\";\n    const str = String(value);\n    return str.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#x27;\");\n  };\n  const getFieldMeta = (field) => {\n    const metaField = meta?.fields?.find((f) => f.fieldname === field.fieldname);\n    return {\n      label: field.label || metaField?.label || field.fieldname,\n      fieldtype: metaField?.fieldtype || \"Data\",\n      options: metaField?.options\n    };\n  };\n  const autoFormat = (value, fieldtype, options) => {\n    if (value === null || value === void 0 || value === \"\") return '<span class=\"text-muted\">\\u2014</span>';\n    switch (fieldtype) {\n      case \"Link\":\n        if (options && value != null) {\n          const slug = String(options).toLowerCase().replace(/\\s+/g, \"-\");\n          const escapedValue = escapeHtml(value);\n          return `<a href=\"/app/${escapeHtml(slug)}/${encodeURIComponent(String(value))}\" target=\"_blank\">${escapedValue}</a>`;\n        }\n        return escapeHtml(value);\n      case \"Select\":\n        return `<span class=\"badge badge-light\">${escapeHtml(value)}</span>`;\n      case \"Date\":\n      case \"Datetime\":\n        const dateValue = frappe?.datetime?.str_to_user ? frappe.datetime.str_to_user(value) : String(value);\n        return escapeHtml(dateValue);\n      case \"Currency\":\n      case \"Float\":\n      case \"Int\":\n        const formattedValue = window.frappe?.format_value ? window.frappe.format_value(value, { fieldtype }) : String(value);\n        return escapeHtml(formattedValue);\n      case \"Check\":\n        return value ? '<span class=\"text-success\">\\u2713 Sim</span>' : '<span class=\"text-danger\">\\u2717 N\\xE3o</span>';\n      default:\n        return escapeHtml(value);\n    }\n  };\n  let rows = \"\";\n  let thead = \"\";\n  if (isTable) {\n    if (arr.length === 0) {\n      rows = `<tr><td colspan=\"${fields.length}\" class=\"text-center text-muted\">Nenhum dado encontrado.</td></tr>`;\n    } else {\n      rows = arr.map(\n        (row) => \"<tr>\" + fields.map((field) => {\n          const metaF = getFieldMeta(field);\n          const value = row[field.fieldname];\n          const displayValue = field.formatter ? field.formatter(value, row, metaF) : autoFormat(value, metaF.fieldtype, metaF.options);\n          return `<td${metaF.fieldtype === \"Link\" ? ' data-debug-link=\"true\"' : \"\"}>${displayValue}</td>`;\n        }).join(\"\") + \"</tr>\"\n      ).join(\"\");\n      thead = \"<tr>\" + fields.map((field) => {\n        const metaF = getFieldMeta(field);\n        const label = field.label || metaF.label || field.fieldname;\n        return `<th class=\"text-muted\">${escapeHtml(label)}</th>`;\n      }).join(\"\") + \"</tr>\";\n    }\n  } else {\n    rows = fields.map((field) => {\n      const metaF = getFieldMeta(field);\n      const value = docOrRows[field.fieldname];\n      const displayValue = field.formatter ? field.formatter(value, docOrRows, metaF) : autoFormat(value, metaF.fieldtype, metaF.options);\n      const label = field.label || metaF.label || field.fieldname;\n      return `<tr><td>${escapeHtml(label)}</td><td>${displayValue}</td></tr>`;\n    }).join(\"\");\n  }\n  const table_html = `<div class=\"form-section\" style=\"margin-bottom: 16px;\">\n      <div class=\"table-responsive\" style=\"border: 1px solid var(--border-color); border-radius: var(--border-radius); overflow: hidden;\">\n        <table class=\"table table-bordered\" style=\"margin: 0; border: none;\">\n          ${thead ? `<thead class=\"table-header\">${thead}</thead>` : \"\"}\n          <tbody>\n            ${rows}\n          </tbody>\n        </table>\n      </div>\n    </div>`;\n  if (typeof wrapper.html === \"function\") {\n    wrapper.html(table_html);\n  } else if (typeof window !== \"undefined\" && window.jQuery && wrapper instanceof window.jQuery) {\n    wrapper.html(table_html);\n  } else if (wrapper instanceof HTMLElement) {\n    wrapper.innerHTML = table_html;\n  }\n};\nagt.utils.form.set_button_primary_style = function(frm, fieldname) {\n  const field = frm.fields_dict[fieldname];\n  if (!field?.$input) {\n    console.warn(`Campo '${fieldname}' n\\xE3o encontrado ou n\\xE3o \\xE9 um bot\\xE3o v\\xE1lido.`);\n    return;\n  }\n  if (field.df.fieldtype === \"Button\") {\n    const $button = field.$input;\n    if ($button && $button.length) {\n      $button.removeClass(\"btn-default btn-secondary btn-success btn-warning btn-danger btn-info btn-light btn-dark\");\n      $button.addClass(\"btn-primary\");\n    }\n  } else {\n    console.warn(`Campo '${fieldname}' n\\xE3o \\xE9 do tipo Button.`);\n  }\n};\nagt.utils.form.transport_values = function(targetForm, field) {\n  if (!agt.src_frm) return;\n  if (!targetForm.doc.__islocal) return;\n  const fieldNames = targetForm.meta.fields.map((f) => f.fieldname);\n  Object.entries(agt.src_frm.fields_dict).forEach(([key, field2]) => {\n    if (!field2.value || typeof field2.value === \"string\" && field2.value.trim() === \"\") return;\n    if (!fieldNames.includes(key)) return;\n    if (targetForm.doc[key] === field2.value) return;\n    console.log(`Setting ${key} to ${field2.value}`);\n    targetForm.set_value(key, field2.value);\n  });\n  targetForm.set_value(field, agt.src_frm.docname);\n  targetForm.save();\n};\n", "// Copyright (c) 2025, AnyGridTech and contributors\n// For license information, please see license.txt\nfrappe.provide(\"agt.utils.table\");\nfrappe.provide(\"agt.utils.table.row\");\nagt.utils.table.row.add_one = async function(form, child_doctype, fields_record) {\n  const snake_child_doctype = agt.utils.text.to_snake_case(child_doctype);\n  const child = form.add_child(snake_child_doctype, fields_record);\n  form.dirty();\n  form.refresh_field(snake_child_doctype);\n  await form.save();\n  return child;\n};\nagt.utils.table.row.add_many = async function(form, child_doctype, fields_record_arr) {\n  const snake_child_doctype = agt.utils.text.to_snake_case(child_doctype);\n  const children = [];\n  fields_record_arr.forEach((fields_record) => {\n    const child = form.add_child(snake_child_doctype, fields_record);\n    children.push(child);\n  });\n  form.dirty();\n  form.refresh_field(snake_child_doctype);\n  await form.save();\n  return children;\n};\nagt.utils.table.row.update_one = async function(frm, fields_record) {\n  const doctype_to_use = frm.doctype || frm.parenttype || \"Unknown\";\n  await Promise.all(\n    Object.entries(fields_record).map(\n      ([fieldname, value]) => frappe.model.set_value(doctype_to_use, frm.name, fieldname, value)\n    )\n  );\n};\nagt.utils.table.row.delete_one = async function(_form, child_doctype, docname) {\n  frappe.model.clear_doc(child_doctype, docname);\n};\nagt.utils.table.row.get_one = function(form, child_doctype, filters) {\n  const snake_case_doctype = agt.utils.text.to_snake_case(child_doctype);\n  const childTable = form.doc[snake_case_doctype];\n  if (!childTable) return;\n  return childTable.find((row) => {\n    for (const [k, v] of Object.entries(filters)) {\n      if (row[k] !== v) return false;\n    }\n    return true;\n  });\n};\nagt.utils.table.row.get_last = function(form, child_doctype) {\n  const snake_case_doctype = agt.utils.text.to_snake_case(child_doctype);\n  const childTable = form.doc[snake_case_doctype];\n  if (!childTable) return;\n  return childTable[childTable.length - 1];\n};\nagt.utils.table.row.find = function(form, child_doctype, filters) {\n  const snake_case_doctype = agt.utils.text.to_snake_case(child_doctype);\n  const childTable = form.doc[snake_case_doctype];\n  if (!childTable) return [];\n  return childTable.filter((row) => {\n    if (!filters.and && !filters.or) return false;\n    let andPassed = true;\n    let orPassed = false;\n    if (filters.and) {\n      for (const [k, v] of Object.entries(filters.and)) {\n        if (row[k] !== v) {\n          andPassed = false;\n          break;\n        }\n      }\n    }\n    if (filters.or) {\n      for (const [k, v] of Object.entries(filters.or)) {\n        if (Array.isArray(v) && v.includes(row[k])) {\n          orPassed = true;\n          break;\n        }\n        if (row[k] === v) {\n          orPassed = true;\n          break;\n        }\n      }\n    } else {\n      orPassed = true;\n    }\n    return andPassed && orPassed;\n  });\n};\nagt.utils.table.row.update_last = async function(form, child_doctype, fields_record) {\n  const lastRow = agt.utils.table.row.get_last(form, child_doctype);\n  if (!lastRow) return;\n  await agt.utils.table.row.update_one(lastRow, fields_record);\n};\nagt.utils.table.is_sync = async function(current, remote, docname, workflowStateField) {\n  if (current.length !== remote.length) return false;\n  const currentMap = new Map(current.map((row) => [row[docname], row]));\n  const remoteMap = new Map(remote.map((r) => [r.name, r]));\n  const allDocsExist = current.every((row) => remoteMap.get(row[docname])) && remote.every((row) => currentMap.has(row.name));\n  if (!allDocsExist) return false;\n  if (workflowStateField) {\n    return !remote.some((remoteItem) => {\n      const currentItem = currentMap.get(remoteItem.name);\n      return currentItem && currentItem[workflowStateField] !== remoteItem.workflow_state;\n    });\n  }\n  return true;\n};\nagt.utils.table.set_custom_properties = async function(frm, options, fieldname, add_row_label, default_values, apply_only_first) {\n  const elementsToHide = {\n    hide_add_row: \".grid-add-row\",\n    hide_remove_row: \".grid-remove-rows\",\n    hide_remove_all_rows: \".grid-remove-all-rows\",\n    hide_row_check: \".grid-row-check\",\n    hide_append_row: \".grid-append-row\",\n    hide_shortcuts: \".grid-shortcuts\",\n    hide_check: \".grid-body .grid-row .grid-row-check\",\n    hide_grid_delete_row: \".grid-delete-row\",\n    hide_grid_move_row: \".grid-move-row\"\n  };\n  const field = frm.fields_dict[fieldname];\n  if (!field?.grid?.wrapper) return;\n  const applyDefaultValues = (rowDoc, rowIndex) => {\n    if (!default_values || !Array.isArray(default_values)) return;\n    if (default_values.length > 0) {\n      const defaultSet = default_values[Math.min(rowIndex, default_values.length - 1)] || default_values[0];\n      if (defaultSet) {\n        Object.entries(defaultSet).forEach(([key, value]) => {\n          if (!(key in rowDoc) || rowDoc[key] === void 0) {\n            rowDoc[key] = value;\n          }\n        });\n      }\n    }\n  };\n  const applyVisibilitySettings = () => {\n    Object.entries(elementsToHide).forEach(([option, selector]) => {\n      if (options[option] && field.grid && field.grid.wrapper) {\n        field.grid.wrapper.find(selector).hide();\n      }\n    });\n    if (options?.hide_config_columns === true) {\n      $(`div[data-fieldname=\"${fieldname}\"] div.col.grid-static-col.d-flex.justify-content-center`).css({ \"visibility\": \"hidden\" });\n      if (frm.fields_dict[fieldname]?.$wrapper) {\n        frm.fields_dict[fieldname].$wrapper.find(\"div.col.grid-static-col.d-flex.justify-content-center\").css({ \"visibility\": \"hidden\" });\n      }\n    }\n  };\n  const gridObj = field.grid;\n  if (gridObj && !gridObj._visibility_hooks_attached) {\n    gridObj._visibility_hooks_attached = true;\n    if (typeof gridObj.add_new_row === \"function\") {\n      const originalAddNewRow = gridObj.add_new_row;\n      gridObj.add_new_row = function(...args) {\n        const result = originalAddNewRow.apply(this, args);\n        if (result && default_values && Array.isArray(default_values) && default_values.length > 0) {\n          const currentRows = frm.doc[fieldname] || [];\n          const newRowIndex = currentRows.length - 1;\n          const shouldApplyDefaults = apply_only_first === void 0 || apply_only_first === false || apply_only_first === true && newRowIndex === 0;\n          if (newRowIndex >= 0 && currentRows[newRowIndex] && shouldApplyDefaults) {\n            applyDefaultValues(currentRows[newRowIndex], newRowIndex);\n            setTimeout(() => {\n              gridObj.refresh();\n            }, 100);\n          }\n        }\n        applyVisibilitySettings();\n        return result;\n      };\n    }\n    if (typeof gridObj.refresh === \"function\") {\n      const originalRefresh = gridObj.refresh;\n      gridObj.refresh = function(...args) {\n        const result = originalRefresh.apply(this, args);\n        applyVisibilitySettings();\n        return result;\n      };\n    }\n  }\n  if (options?.hidden !== void 0) {\n    frm.set_df_property(fieldname, \"hidden\", options.hidden ? 1 : 0);\n  }\n  if (options?.read_only !== void 0) {\n    frm.set_df_property(fieldname, \"read_only\", options.read_only ? 1 : 0);\n  }\n  if (options?.reqd !== void 0) {\n    frm.set_df_property(fieldname, \"reqd\", options.reqd ? 1 : 0);\n  }\n  if (options?.label !== void 0) {\n    frm.set_df_property(fieldname, \"label\", options.label);\n  }\n  if (options?.description !== void 0) {\n    frm.set_df_property(fieldname, \"description\", options.description);\n  }\n  if (options?.cannot_add_rows !== void 0) {\n    frm.set_df_property(fieldname, \"cannot_add_rows\", options.cannot_add_rows ? 1 : 0);\n  }\n  if (options?.cannot_delete_rows !== void 0) {\n    frm.set_df_property(fieldname, \"cannot_delete_rows\", options.cannot_delete_rows ? 1 : 0);\n  }\n  if (add_row_label && frm.fields_dict[fieldname] && frm.fields_dict[fieldname].grid) {\n    frm.refresh_field(fieldname);\n    const grid = frm.fields_dict[fieldname].grid;\n    const btn = grid?.wrapper?.find(\".grid-add-row\");\n    if (btn && btn.length) {\n      btn.text(add_row_label);\n    }\n  }\n};\nagt.utils.table.custom_add_row_button = function(frm, fieldname, label) {\n  if (frm.fields_dict[fieldname] && frm.fields_dict[fieldname].grid) {\n    frm.refresh_field(fieldname);\n    const grid = frm.fields_dict[fieldname].grid;\n    const btn = grid?.wrapper?.find(\".grid-add-row\");\n    if (btn && btn.length) {\n      btn.text(label);\n    }\n  }\n};\n"],
  "mappings": "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",
  "names": ["_a", "__defProp", "__defNormalProp", "_a", "_a", "_b", "_a", "_b", "_a"]
}
